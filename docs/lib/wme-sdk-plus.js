var initWmeSdkPlus=function(){"use strict";var We=Object.defineProperty,He=(i,n,o)=>n in i?We(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,te=(i,n,o)=>He(i,typeof n!="symbol"?n+"":n,o),pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},de={};/*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var ye;function Ce(){if(ye)return de;ye=1;var i;return function(n){(function(o){var f=typeof globalThis=="object"?globalThis:typeof pe=="object"?pe:typeof self=="object"?self:typeof this=="object"?this:j(),_=O(n);typeof f.Reflect<"u"&&(_=O(f.Reflect,_)),o(_,f),typeof f.Reflect>"u"&&(f.Reflect=n);function O(F,I){return function(E,x){Object.defineProperty(F,E,{configurable:!0,writable:!0,value:x}),I&&I(E,x)}}function V(){try{return Function("return this;")()}catch{}}function M(){try{return(0,eval)("(function() { return this; })()")}catch{}}function j(){return V()||M()}})(function(o,f){var _=Object.prototype.hasOwnProperty,O=typeof Symbol=="function",V=O&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",M=O&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",j=typeof Object.create=="function",F={__proto__:[]}instanceof Array,I=!j&&!F,E={create:j?function(){return q(Object.create(null))}:F?function(){return q({__proto__:null})}:function(){return q({})},has:I?function(t,e){return _.call(t,e)}:function(t,e){return e in t},get:I?function(t,e){return _.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},x=Object.getPrototypeOf(Function),R=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Rt(),D=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:At(),K=typeof WeakMap=="function"?WeakMap:Vt(),T=O?Symbol.for("@reflect-metadata:registry"):void 0,$=Pt(),N=It($);function lt(t,e,r,a){if(p(r)){if(!Q(t))throw new TypeError;if(!tt(e))throw new TypeError;return mt(t,e)}else{if(!Q(t))throw new TypeError;if(!g(e))throw new TypeError;if(!g(a)&&!p(a)&&!P(a))throw new TypeError;return P(a)&&(a=void 0),r=S(r),Ot(t,e,r,a)}}o("decorate",lt);function ht(t,e){function r(a,h){if(!g(a))throw new TypeError;if(!p(h)&&!jt(h))throw new TypeError;J(t,e,a,h)}return r}o("metadata",ht);function pt(t,e,r,a){if(!g(r))throw new TypeError;return p(a)||(a=S(a)),J(t,e,r,a)}o("defineMetadata",pt);function dt(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),L(t,e,r)}o("hasMetadata",dt);function yt(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),W(t,e,r)}o("hasOwnMetadata",yt);function _t(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),U(t,e,r)}o("getMetadata",_t);function wt(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),G(t,e,r)}o("getOwnMetadata",wt);function vt(t,e){if(!g(t))throw new TypeError;return p(e)||(e=S(e)),B(t,e)}o("getMetadataKeys",vt);function gt(t,e){if(!g(t))throw new TypeError;return p(e)||(e=S(e)),Z(t,e)}o("getOwnMetadataKeys",gt);function bt(t,e,r){if(!g(e))throw new TypeError;if(p(r)||(r=S(r)),!g(e))throw new TypeError;p(r)||(r=S(r));var a=A(e,r,!1);return p(a)?!1:a.OrdinaryDeleteMetadata(t,e,r)}o("deleteMetadata",bt);function mt(t,e){for(var r=t.length-1;r>=0;--r){var a=t[r],h=a(e);if(!p(h)&&!P(h)){if(!tt(h))throw new TypeError;e=h}}return e}function Ot(t,e,r,a){for(var h=t.length-1;h>=0;--h){var m=t[h],b=m(e,r,a);if(!p(b)&&!P(b)){if(!g(b))throw new TypeError;a=b}}return a}function L(t,e,r){var a=W(t,e,r);if(a)return!0;var h=C(e);return P(h)?!1:L(t,h,r)}function W(t,e,r){var a=A(e,r,!1);return p(a)?!1:X(a.OrdinaryHasOwnMetadata(t,e,r))}function U(t,e,r){var a=W(t,e,r);if(a)return G(t,e,r);var h=C(e);if(!P(h))return U(t,h,r)}function G(t,e,r){var a=A(e,r,!1);if(!p(a))return a.OrdinaryGetOwnMetadata(t,e,r)}function J(t,e,r,a){var h=A(r,a,!0);h.OrdinaryDefineOwnMetadata(t,e,r,a)}function B(t,e){var r=Z(t,e),a=C(t);if(a===null)return r;var h=B(a,e);if(h.length<=0)return r;if(r.length<=0)return h;for(var m=new D,b=[],d=0,s=r;d<s.length;d++){var u=s[d],c=m.has(u);c||(m.add(u),b.push(u))}for(var l=0,y=h;l<y.length;l++){var u=y[l],c=m.has(u);c||(m.add(u),b.push(u))}return b}function Z(t,e){var r=A(t,e,!1);return r?r.OrdinaryOwnMetadataKeys(t,e):[]}function Y(t){if(t===null)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return t===null?1:6;default:return 6}}function p(t){return t===void 0}function P(t){return t===null}function kt(t){return typeof t=="symbol"}function g(t){return typeof t=="object"?t!==null:typeof t=="function"}function St(t,e){switch(Y(t)){case 0:return t;case 1:return t;case 2:return t;case 3:return t;case 4:return t;case 5:return t}var r="string",a=et(t,V);if(a!==void 0){var h=a.call(t,r);if(g(h))throw new TypeError;return h}return Mt(t)}function Mt(t,e){var r,a;{var h=t.toString;if(z(h)){var a=h.call(t);if(!g(a))return a}var r=t.valueOf;if(z(r)){var a=r.call(t);if(!g(a))return a}}throw new TypeError}function X(t){return!!t}function Et(t){return""+t}function S(t){var e=St(t);return kt(e)?e:Et(e)}function Q(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:Object.prototype.toString.call(t)==="[object Array]"}function z(t){return typeof t=="function"}function tt(t){return typeof t=="function"}function jt(t){switch(Y(t)){case 3:return!0;case 4:return!0;default:return!1}}function H(t,e){return t===e||t!==t&&e!==e}function et(t,e){var r=t[e];if(r!=null){if(!z(r))throw new TypeError;return r}}function rt(t){var e=et(t,M);if(!z(e))throw new TypeError;var r=e.call(t);if(!g(r))throw new TypeError;return r}function nt(t){return t.value}function it(t){var e=t.next();return e.done?!1:e}function ot(t){var e=t.return;e&&e.call(t)}function C(t){var e=Object.getPrototypeOf(t);if(typeof t!="function"||t===x||e!==x)return e;var r=t.prototype,a=r&&Object.getPrototypeOf(r);if(a==null||a===Object.prototype)return e;var h=a.constructor;return typeof h!="function"||h===t?e:h}function Tt(){var t;!p(T)&&typeof f.Reflect<"u"&&!(T in f.Reflect)&&typeof f.Reflect.defineMetadata=="function"&&(t=xt(f.Reflect));var e,r,a,h=new K,m={registerProvider:b,getProvider:s,setProvider:c};return m;function b(l){if(!Object.isExtensible(m))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case t===l:break;case p(e):e=l;break;case e===l:break;case p(r):r=l;break;case r===l:break;default:a===void 0&&(a=new D),a.add(l);break}}function d(l,y){if(!p(e)){if(e.isProviderFor(l,y))return e;if(!p(r)){if(r.isProviderFor(l,y))return e;if(!p(a))for(var w=rt(a);;){var v=it(w);if(!v)return;var k=nt(v);if(k.isProviderFor(l,y))return ot(w),k}}}if(!p(t)&&t.isProviderFor(l,y))return t}function s(l,y){var w=h.get(l),v;return p(w)||(v=w.get(y)),p(v)&&(v=d(l,y),p(v)||(p(w)&&(w=new R,h.set(l,w)),w.set(y,v))),v}function u(l){if(p(l))throw new TypeError;return e===l||r===l||!p(a)&&a.has(l)}function c(l,y,w){if(!u(w))throw new Error("Metadata provider not registered.");var v=s(l,y);if(v!==w){if(!p(v))return!1;var k=h.get(l);p(k)&&(k=new R,h.set(l,k)),k.set(y,w)}return!0}}function Pt(){var t;return!p(T)&&g(f.Reflect)&&Object.isExtensible(f.Reflect)&&(t=f.Reflect[T]),p(t)&&(t=Tt()),!p(T)&&g(f.Reflect)&&Object.isExtensible(f.Reflect)&&Object.defineProperty(f.Reflect,T,{enumerable:!1,configurable:!1,writable:!1,value:t}),t}function It(t){var e=new K,r={isProviderFor:function(u,c){var l=e.get(u);return p(l)?!1:l.has(c)},OrdinaryDefineOwnMetadata:b,OrdinaryHasOwnMetadata:h,OrdinaryGetOwnMetadata:m,OrdinaryOwnMetadataKeys:d,OrdinaryDeleteMetadata:s};return $.registerProvider(r),r;function a(u,c,l){var y=e.get(u),w=!1;if(p(y)){if(!l)return;y=new R,e.set(u,y),w=!0}var v=y.get(c);if(p(v)){if(!l)return;if(v=new R,y.set(c,v),!t.setProvider(u,c,r))throw y.delete(c),w&&e.delete(u),new Error("Wrong provider for target.")}return v}function h(u,c,l){var y=a(c,l,!1);return p(y)?!1:X(y.has(u))}function m(u,c,l){var y=a(c,l,!1);if(!p(y))return y.get(u)}function b(u,c,l,y){var w=a(l,y,!0);w.set(u,c)}function d(u,c){var l=[],y=a(u,c,!1);if(p(y))return l;for(var w=y.keys(),v=rt(w),k=0;;){var at=it(v);if(!at)return l.length=k,l;var Ft=nt(at);try{l[k]=Ft}catch($t){try{ot(v)}finally{throw $t}}k++}}function s(u,c,l){var y=a(c,l,!1);if(p(y)||!y.delete(u))return!1;if(y.size===0){var w=e.get(c);p(w)||(w.delete(l),w.size===0&&e.delete(w))}return!0}}function xt(t){var e=t.defineMetadata,r=t.hasOwnMetadata,a=t.getOwnMetadata,h=t.getOwnMetadataKeys,m=t.deleteMetadata,b=new K,d={isProviderFor:function(s,u){var c=b.get(s);return!p(c)&&c.has(u)?!0:h(s,u).length?(p(c)&&(c=new D,b.set(s,c)),c.add(u),!0):!1},OrdinaryDefineOwnMetadata:e,OrdinaryHasOwnMetadata:r,OrdinaryGetOwnMetadata:a,OrdinaryOwnMetadataKeys:h,OrdinaryDeleteMetadata:m};return d}function A(t,e,r){var a=$.getProvider(t,e);if(!p(a))return a;if(r){if($.setProvider(t,e,N))return N;throw new Error("Illegal state.")}}function Rt(){var t={},e=[],r=function(){function d(s,u,c){this._index=0,this._keys=s,this._values=u,this._selector=c}return d.prototype["@@iterator"]=function(){return this},d.prototype[M]=function(){return this},d.prototype.next=function(){var s=this._index;if(s>=0&&s<this._keys.length){var u=this._selector(this._keys[s],this._values[s]);return s+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:u,done:!1}}return{value:void 0,done:!0}},d.prototype.throw=function(s){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),s},d.prototype.return=function(s){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:s,done:!0}},d}(),a=function(){function d(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(d.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),d.prototype.has=function(s){return this._find(s,!1)>=0},d.prototype.get=function(s){var u=this._find(s,!1);return u>=0?this._values[u]:void 0},d.prototype.set=function(s,u){var c=this._find(s,!0);return this._values[c]=u,this},d.prototype.delete=function(s){var u=this._find(s,!1);if(u>=0){for(var c=this._keys.length,l=u+1;l<c;l++)this._keys[l-1]=this._keys[l],this._values[l-1]=this._values[l];return this._keys.length--,this._values.length--,H(s,this._cacheKey)&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},d.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},d.prototype.keys=function(){return new r(this._keys,this._values,h)},d.prototype.values=function(){return new r(this._keys,this._values,m)},d.prototype.entries=function(){return new r(this._keys,this._values,b)},d.prototype["@@iterator"]=function(){return this.entries()},d.prototype[M]=function(){return this.entries()},d.prototype._find=function(s,u){if(!H(this._cacheKey,s)){this._cacheIndex=-1;for(var c=0;c<this._keys.length;c++)if(H(this._keys[c],s)){this._cacheIndex=c;break}}return this._cacheIndex<0&&u&&(this._cacheIndex=this._keys.length,this._keys.push(s),this._values.push(void 0)),this._cacheIndex},d}();return a;function h(d,s){return d}function m(d,s){return s}function b(d,s){return[d,s]}}function At(){var t=function(){function e(){this._map=new R}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(r){return this._map.has(r)},e.prototype.add=function(r){return this._map.set(r,r),this},e.prototype.delete=function(r){return this._map.delete(r)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.keys()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[M]=function(){return this.keys()},e}();return t}function Vt(){var t=16,e=E.create(),r=a();return function(){function s(){this._key=a()}return s.prototype.has=function(u){var c=h(u,!1);return c!==void 0?E.has(c,this._key):!1},s.prototype.get=function(u){var c=h(u,!1);return c!==void 0?E.get(c,this._key):void 0},s.prototype.set=function(u,c){var l=h(u,!0);return l[this._key]=c,this},s.prototype.delete=function(u){var c=h(u,!1);return c!==void 0?delete c[this._key]:!1},s.prototype.clear=function(){this._key=a()},s}();function a(){var s;do s="@@WeakMap@@"+d();while(E.has(e,s));return e[s]=!0,s}function h(s,u){if(!_.call(s,r)){if(!u)return;Object.defineProperty(s,r,{value:E.create()})}return s[r]}function m(s,u){for(var c=0;c<u;++c)s[c]=Math.random()*255|0;return s}function b(s){if(typeof Uint8Array=="function"){var u=new Uint8Array(s);return typeof crypto<"u"?crypto.getRandomValues(u):typeof msCrypto<"u"?msCrypto.getRandomValues(u):m(u,s),u}return m(new Array(s),s)}function d(){var s=b(t);s[6]=s[6]&79|64,s[8]=s[8]&191|128;for(var u="",c=0;c<t;++c){var l=s[c];(c===4||c===6||c===8)&&(u+="-"),l<16&&(u+="0"),u+=l.toString(16).toLowerCase()}return u}}function q(t){return t.__=void 0,delete t.__,t}})}(i||(i={})),de}Ce();const ee=Symbol("ARTIFACTS");let qe=class{constructor(n){te(this,"_recognizableHooks",new Map),te(this,"_hookDependencies",new Map),te(this,"_installedHooks",new Map);for(const[o,{hook:f,deps:_}]of Object.entries(n))this._recognizableHooks.set(o,f),_&&this._hookDependencies.set(o,_||[])}isHookInstalled(n,o){const f=this._recognizableHooks.get(o);if(!f||!this._installedHooks.has(n))return!1;const _=this._installedHooks.get(n);return _?_.some(O=>O===f):!1}markHookAsInstalled(n,o){var f;const _=this._recognizableHooks.get(o);if(!_)throw new Error(`Hook ${o} not found`);this._installedHooks.has(n)||this._installedHooks.set(n,[]),(f=this._installedHooks.get(n))==null||f.push(_)}async installHook(n,o){const f=this._recognizableHooks.get(n);if(!f)throw new Error(`Hook ${n} not found`);if(this.isHookInstalled(o,n))return;const _=this._hookDependencies.get(n)||[];for(const M of _)await this.installHook(M,o);const O=Reflect.getMetadata(ee,o)||{};Reflect.hasMetadata(ee,o)||Reflect.defineMetadata(ee,O,o);const V=(await Promise.all(f.map(M=>M.install({sdk:o,artifacts:O})))).filter(M=>M&&typeof M=="object");Object.assign(O,...V),this.markHookAsInstalled(o,n)}async installAllHooks(n){for(const o of this._recognizableHooks.keys())await this.installHook(o,n)}};var Ne=Object.defineProperty,Le=(i,n,o)=>n in i?Ne(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,zt=(i,n,o)=>Le(i,typeof n!="symbol"?n+"":n,o),Ue=Object.defineProperty,Ge=(i,n,o)=>n in i?Ue(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,Gt=(i,n,o)=>Ge(i,typeof n!="symbol"?n+"":n,o),_e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},we={};/*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var ve;function Je(){if(ve)return we;ve=1;var i;return function(n){(function(o){var f=typeof globalThis=="object"?globalThis:typeof _e=="object"?_e:typeof self=="object"?self:typeof this=="object"?this:j(),_=O(n);typeof f.Reflect<"u"&&(_=O(f.Reflect,_)),o(_,f),typeof f.Reflect>"u"&&(f.Reflect=n);function O(F,I){return function(E,x){Object.defineProperty(F,E,{configurable:!0,writable:!0,value:x}),I&&I(E,x)}}function V(){try{return Function("return this;")()}catch{}}function M(){try{return(0,eval)("(function() { return this; })()")}catch{}}function j(){return V()||M()}})(function(o,f){var _=Object.prototype.hasOwnProperty,O=typeof Symbol=="function",V=O&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",M=O&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",j=typeof Object.create=="function",F={__proto__:[]}instanceof Array,I=!j&&!F,E={create:j?function(){return q(Object.create(null))}:F?function(){return q({__proto__:null})}:function(){return q({})},has:I?function(t,e){return _.call(t,e)}:function(t,e){return e in t},get:I?function(t,e){return _.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},x=Object.getPrototypeOf(Function),R=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Rt(),D=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:At(),K=typeof WeakMap=="function"?WeakMap:Vt(),T=O?Symbol.for("@reflect-metadata:registry"):void 0,$=Pt(),N=It($);function lt(t,e,r,a){if(p(r)){if(!Q(t))throw new TypeError;if(!tt(e))throw new TypeError;return mt(t,e)}else{if(!Q(t))throw new TypeError;if(!g(e))throw new TypeError;if(!g(a)&&!p(a)&&!P(a))throw new TypeError;return P(a)&&(a=void 0),r=S(r),Ot(t,e,r,a)}}o("decorate",lt);function ht(t,e){function r(a,h){if(!g(a))throw new TypeError;if(!p(h)&&!jt(h))throw new TypeError;J(t,e,a,h)}return r}o("metadata",ht);function pt(t,e,r,a){if(!g(r))throw new TypeError;return p(a)||(a=S(a)),J(t,e,r,a)}o("defineMetadata",pt);function dt(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),L(t,e,r)}o("hasMetadata",dt);function yt(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),W(t,e,r)}o("hasOwnMetadata",yt);function _t(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),U(t,e,r)}o("getMetadata",_t);function wt(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),G(t,e,r)}o("getOwnMetadata",wt);function vt(t,e){if(!g(t))throw new TypeError;return p(e)||(e=S(e)),B(t,e)}o("getMetadataKeys",vt);function gt(t,e){if(!g(t))throw new TypeError;return p(e)||(e=S(e)),Z(t,e)}o("getOwnMetadataKeys",gt);function bt(t,e,r){if(!g(e))throw new TypeError;if(p(r)||(r=S(r)),!g(e))throw new TypeError;p(r)||(r=S(r));var a=A(e,r,!1);return p(a)?!1:a.OrdinaryDeleteMetadata(t,e,r)}o("deleteMetadata",bt);function mt(t,e){for(var r=t.length-1;r>=0;--r){var a=t[r],h=a(e);if(!p(h)&&!P(h)){if(!tt(h))throw new TypeError;e=h}}return e}function Ot(t,e,r,a){for(var h=t.length-1;h>=0;--h){var m=t[h],b=m(e,r,a);if(!p(b)&&!P(b)){if(!g(b))throw new TypeError;a=b}}return a}function L(t,e,r){var a=W(t,e,r);if(a)return!0;var h=C(e);return P(h)?!1:L(t,h,r)}function W(t,e,r){var a=A(e,r,!1);return p(a)?!1:X(a.OrdinaryHasOwnMetadata(t,e,r))}function U(t,e,r){var a=W(t,e,r);if(a)return G(t,e,r);var h=C(e);if(!P(h))return U(t,h,r)}function G(t,e,r){var a=A(e,r,!1);if(!p(a))return a.OrdinaryGetOwnMetadata(t,e,r)}function J(t,e,r,a){var h=A(r,a,!0);h.OrdinaryDefineOwnMetadata(t,e,r,a)}function B(t,e){var r=Z(t,e),a=C(t);if(a===null)return r;var h=B(a,e);if(h.length<=0)return r;if(r.length<=0)return h;for(var m=new D,b=[],d=0,s=r;d<s.length;d++){var u=s[d],c=m.has(u);c||(m.add(u),b.push(u))}for(var l=0,y=h;l<y.length;l++){var u=y[l],c=m.has(u);c||(m.add(u),b.push(u))}return b}function Z(t,e){var r=A(t,e,!1);return r?r.OrdinaryOwnMetadataKeys(t,e):[]}function Y(t){if(t===null)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return t===null?1:6;default:return 6}}function p(t){return t===void 0}function P(t){return t===null}function kt(t){return typeof t=="symbol"}function g(t){return typeof t=="object"?t!==null:typeof t=="function"}function St(t,e){switch(Y(t)){case 0:return t;case 1:return t;case 2:return t;case 3:return t;case 4:return t;case 5:return t}var r="string",a=et(t,V);if(a!==void 0){var h=a.call(t,r);if(g(h))throw new TypeError;return h}return Mt(t)}function Mt(t,e){var r,a;{var h=t.toString;if(z(h)){var a=h.call(t);if(!g(a))return a}var r=t.valueOf;if(z(r)){var a=r.call(t);if(!g(a))return a}}throw new TypeError}function X(t){return!!t}function Et(t){return""+t}function S(t){var e=St(t);return kt(e)?e:Et(e)}function Q(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:Object.prototype.toString.call(t)==="[object Array]"}function z(t){return typeof t=="function"}function tt(t){return typeof t=="function"}function jt(t){switch(Y(t)){case 3:return!0;case 4:return!0;default:return!1}}function H(t,e){return t===e||t!==t&&e!==e}function et(t,e){var r=t[e];if(r!=null){if(!z(r))throw new TypeError;return r}}function rt(t){var e=et(t,M);if(!z(e))throw new TypeError;var r=e.call(t);if(!g(r))throw new TypeError;return r}function nt(t){return t.value}function it(t){var e=t.next();return e.done?!1:e}function ot(t){var e=t.return;e&&e.call(t)}function C(t){var e=Object.getPrototypeOf(t);if(typeof t!="function"||t===x||e!==x)return e;var r=t.prototype,a=r&&Object.getPrototypeOf(r);if(a==null||a===Object.prototype)return e;var h=a.constructor;return typeof h!="function"||h===t?e:h}function Tt(){var t;!p(T)&&typeof f.Reflect<"u"&&!(T in f.Reflect)&&typeof f.Reflect.defineMetadata=="function"&&(t=xt(f.Reflect));var e,r,a,h=new K,m={registerProvider:b,getProvider:s,setProvider:c};return m;function b(l){if(!Object.isExtensible(m))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case t===l:break;case p(e):e=l;break;case e===l:break;case p(r):r=l;break;case r===l:break;default:a===void 0&&(a=new D),a.add(l);break}}function d(l,y){if(!p(e)){if(e.isProviderFor(l,y))return e;if(!p(r)){if(r.isProviderFor(l,y))return e;if(!p(a))for(var w=rt(a);;){var v=it(w);if(!v)return;var k=nt(v);if(k.isProviderFor(l,y))return ot(w),k}}}if(!p(t)&&t.isProviderFor(l,y))return t}function s(l,y){var w=h.get(l),v;return p(w)||(v=w.get(y)),p(v)&&(v=d(l,y),p(v)||(p(w)&&(w=new R,h.set(l,w)),w.set(y,v))),v}function u(l){if(p(l))throw new TypeError;return e===l||r===l||!p(a)&&a.has(l)}function c(l,y,w){if(!u(w))throw new Error("Metadata provider not registered.");var v=s(l,y);if(v!==w){if(!p(v))return!1;var k=h.get(l);p(k)&&(k=new R,h.set(l,k)),k.set(y,w)}return!0}}function Pt(){var t;return!p(T)&&g(f.Reflect)&&Object.isExtensible(f.Reflect)&&(t=f.Reflect[T]),p(t)&&(t=Tt()),!p(T)&&g(f.Reflect)&&Object.isExtensible(f.Reflect)&&Object.defineProperty(f.Reflect,T,{enumerable:!1,configurable:!1,writable:!1,value:t}),t}function It(t){var e=new K,r={isProviderFor:function(u,c){var l=e.get(u);return p(l)?!1:l.has(c)},OrdinaryDefineOwnMetadata:b,OrdinaryHasOwnMetadata:h,OrdinaryGetOwnMetadata:m,OrdinaryOwnMetadataKeys:d,OrdinaryDeleteMetadata:s};return $.registerProvider(r),r;function a(u,c,l){var y=e.get(u),w=!1;if(p(y)){if(!l)return;y=new R,e.set(u,y),w=!0}var v=y.get(c);if(p(v)){if(!l)return;if(v=new R,y.set(c,v),!t.setProvider(u,c,r))throw y.delete(c),w&&e.delete(u),new Error("Wrong provider for target.")}return v}function h(u,c,l){var y=a(c,l,!1);return p(y)?!1:X(y.has(u))}function m(u,c,l){var y=a(c,l,!1);if(!p(y))return y.get(u)}function b(u,c,l,y){var w=a(l,y,!0);w.set(u,c)}function d(u,c){var l=[],y=a(u,c,!1);if(p(y))return l;for(var w=y.keys(),v=rt(w),k=0;;){var at=it(v);if(!at)return l.length=k,l;var Ft=nt(at);try{l[k]=Ft}catch($t){try{ot(v)}finally{throw $t}}k++}}function s(u,c,l){var y=a(c,l,!1);if(p(y)||!y.delete(u))return!1;if(y.size===0){var w=e.get(c);p(w)||(w.delete(l),w.size===0&&e.delete(w))}return!0}}function xt(t){var e=t.defineMetadata,r=t.hasOwnMetadata,a=t.getOwnMetadata,h=t.getOwnMetadataKeys,m=t.deleteMetadata,b=new K,d={isProviderFor:function(s,u){var c=b.get(s);return!p(c)&&c.has(u)?!0:h(s,u).length?(p(c)&&(c=new D,b.set(s,c)),c.add(u),!0):!1},OrdinaryDefineOwnMetadata:e,OrdinaryHasOwnMetadata:r,OrdinaryGetOwnMetadata:a,OrdinaryOwnMetadataKeys:h,OrdinaryDeleteMetadata:m};return d}function A(t,e,r){var a=$.getProvider(t,e);if(!p(a))return a;if(r){if($.setProvider(t,e,N))return N;throw new Error("Illegal state.")}}function Rt(){var t={},e=[],r=function(){function d(s,u,c){this._index=0,this._keys=s,this._values=u,this._selector=c}return d.prototype["@@iterator"]=function(){return this},d.prototype[M]=function(){return this},d.prototype.next=function(){var s=this._index;if(s>=0&&s<this._keys.length){var u=this._selector(this._keys[s],this._values[s]);return s+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:u,done:!1}}return{value:void 0,done:!0}},d.prototype.throw=function(s){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),s},d.prototype.return=function(s){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:s,done:!0}},d}(),a=function(){function d(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(d.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),d.prototype.has=function(s){return this._find(s,!1)>=0},d.prototype.get=function(s){var u=this._find(s,!1);return u>=0?this._values[u]:void 0},d.prototype.set=function(s,u){var c=this._find(s,!0);return this._values[c]=u,this},d.prototype.delete=function(s){var u=this._find(s,!1);if(u>=0){for(var c=this._keys.length,l=u+1;l<c;l++)this._keys[l-1]=this._keys[l],this._values[l-1]=this._values[l];return this._keys.length--,this._values.length--,H(s,this._cacheKey)&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},d.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},d.prototype.keys=function(){return new r(this._keys,this._values,h)},d.prototype.values=function(){return new r(this._keys,this._values,m)},d.prototype.entries=function(){return new r(this._keys,this._values,b)},d.prototype["@@iterator"]=function(){return this.entries()},d.prototype[M]=function(){return this.entries()},d.prototype._find=function(s,u){if(!H(this._cacheKey,s)){this._cacheIndex=-1;for(var c=0;c<this._keys.length;c++)if(H(this._keys[c],s)){this._cacheIndex=c;break}}return this._cacheIndex<0&&u&&(this._cacheIndex=this._keys.length,this._keys.push(s),this._values.push(void 0)),this._cacheIndex},d}();return a;function h(d,s){return d}function m(d,s){return s}function b(d,s){return[d,s]}}function At(){var t=function(){function e(){this._map=new R}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(r){return this._map.has(r)},e.prototype.add=function(r){return this._map.set(r,r),this},e.prototype.delete=function(r){return this._map.delete(r)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.keys()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[M]=function(){return this.keys()},e}();return t}function Vt(){var t=16,e=E.create(),r=a();return function(){function s(){this._key=a()}return s.prototype.has=function(u){var c=h(u,!1);return c!==void 0?E.has(c,this._key):!1},s.prototype.get=function(u){var c=h(u,!1);return c!==void 0?E.get(c,this._key):void 0},s.prototype.set=function(u,c){var l=h(u,!0);return l[this._key]=c,this},s.prototype.delete=function(u){var c=h(u,!1);return c!==void 0?delete c[this._key]:!1},s.prototype.clear=function(){this._key=a()},s}();function a(){var s;do s="@@WeakMap@@"+d();while(E.has(e,s));return e[s]=!0,s}function h(s,u){if(!_.call(s,r)){if(!u)return;Object.defineProperty(s,r,{value:E.create()})}return s[r]}function m(s,u){for(var c=0;c<u;++c)s[c]=Math.random()*255|0;return s}function b(s){if(typeof Uint8Array=="function"){var u=new Uint8Array(s);return typeof crypto<"u"?crypto.getRandomValues(u):typeof msCrypto<"u"?msCrypto.getRandomValues(u):m(u,s),u}return m(new Array(s),s)}function d(){var s=b(t);s[6]=s[6]&79|64,s[8]=s[8]&191|128;for(var u="",c=0;c<t;++c){var l=s[c];(c===4||c===6||c===8)&&(u+="-"),l<16&&(u+="0"),u+=l.toString(16).toLowerCase()}return u}}function q(t){return t.__=void 0,delete t.__,t}})}(i||(i={})),we}Je();var Be=Object.defineProperty,Ze=(i,n,o)=>n in i?Be(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,Dt=(i,n,o)=>Ze(i,typeof n!="symbol"?n+"":n,o);let Ye=class{constructor(n,o){Dt(this,"_target"),Dt(this,"_key"),Dt(this,"_oldValue"),Dt(this,"_wasDefined",!1),Dt(this,"_isSwapped",!1),this._target=n,this._key=o,this._oldValue=this._target[this._key]}get isSwapped(){return this._isSwapped}get originalValue(){return this._oldValue}get value(){return this._target[this._key]}get target(){return this._target}restore(){this.isSwapped&&(this._wasDefined?this._target[this._key]=this._oldValue:delete this._target[this._key],this._isSwapped=!1)}swap(n){this.isSwapped||(this._wasDefined=Object.hasOwn(this._target,this._key),this._oldValue=this._target[this._key]),this._target[this._key]=n,this._isSwapped=!0}};const Xe={onlyIfNotExists:!0,isFactory:!1};class Jt{constructor(n,o,f={}){if(Gt(this,"_installedInstances",new Map),Gt(this,"_path"),Gt(this,"_targetValue"),Gt(this,"_options"),this._path=n.split("."),this._path.length===0)throw new Error("Path must not be empty");this._targetValue=o,this._options={...Xe,...f}}_getTargetObject(n){let o=n;for(const f of this._path.slice(0,this._path.length-1))o[f]||(o[f]={}),o=o[f];return o}_createSwapper(n){const o=this._getTargetObject(n);return new Ye(o,this._path.at(-1))}install({sdk:n,...o}){if(this._installedInstances.has(n))return;const f=this._createSwapper(n);if(!(f.value&&this._options.onlyIfNotExists)){if(this._options.isFactory&&typeof this._targetValue=="function"){const _=this._targetValue({sdk:n,...o});f.swap(_)}else f.swap(this._targetValue);this._installedInstances.set(n,f)}}uninstall({sdk:n}){const o=this._installedInstances.get(n);o&&(o.restore(),this._installedInstances.delete(n))}}function ge(){return"unsafeWindow"in window?window.unsafeWindow:window}var Qe=Object.defineProperty,tr=(i,n,o)=>n in i?Qe(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,st=(i,n,o)=>tr(i,typeof n!="symbol"?n+"":n,o);let er=class{constructor(n,o){st(this,"_target"),st(this,"_key"),st(this,"_oldValue"),st(this,"_wasDefined",!1),st(this,"_isSwapped",!1),this._target=n,this._key=o,this._oldValue=this._target[this._key]}get isSwapped(){return this._isSwapped}get originalValue(){return this._oldValue}get value(){return this._target[this._key]}get target(){return this._target}restore(){this.isSwapped&&(this._wasDefined?this._target[this._key]=this._oldValue:delete this._target[this._key],this._isSwapped=!1)}swap(n){this.isSwapped||(this._wasDefined=Object.hasOwn(this._target,this._key),this._oldValue=this._target[this._key]),this._target[this._key]=n,this._isSwapped=!0}},re=class{constructor(n,o,f){st(this,"_enabled",!1),st(this,"_fnSwapper"),st(this,"_interceptionFunction"),st(this,"_middlewares",[]),this._fnSwapper=new er(n,o),this._interceptionFunction=f}get enabled(){return this._fnSwapper.isSwapped&&this._enabled}disable(){this._enabled=!1,this.enabled&&this._fnSwapper.restore()}enable(){this._enabled=!0,this._fnSwapper.isSwapped||this.swapToInterceptor()}swapToInterceptor(){this._fnSwapper.swap((...n)=>{if(!this._enabled)return this.callOriginalInvocator(...n);const o=this.runMiddlewares(n);if(o){if("output"in o)return o.output;"input"in o&&(n=o.input)}return this._interceptionFunction.call(this._fnSwapper.target,this.getOriginalInvocator(),...n)})}getOriginalInvocator(){return this._fnSwapper.originalValue.bind(this._fnSwapper.target)}callOriginalInvocator(...n){return this.getOriginalInvocator()(...n)}runMiddlewares(n){for(const o of this._middlewares){const f=o(...n);if(f){if("output"in f)return f;"input"in f&&(n=f.input)}}return{input:n}}registerMiddleware(n){this._middlewares.push(n)}};function rr(i,n){try{return i()}catch{return n}}let nr=class extends re{constructor(n,o,f){super(n,o,f),st(this,"_loggedInvocationRequests",[]),this.registerMiddleware((..._)=>this.logRequest(..._))}logRequest(...n){this._loggedInvocationRequests.push(n)}flushLoggedRequests(){const n=this.getLoggedRequests();return this._loggedInvocationRequests=[],n}getLoggedRequests(){return this._loggedInvocationRequests}executeOriginalLoggedRequests(){this.flushLoggedRequests().forEach(n=>rr(()=>this.callOriginalInvocator(...n)))}},ir=class{constructor(){zt(this,"_hasResult",!1),zt(this,"result")}store(n){return this.result=n,this._hasResult=!0,n}clear(){this.result=void 0,this._hasResult=!1}getResult(){if(this.hasResult)throw new Error("No result is stored");return this.result}get hasResult(){return this._hasResult}};function or(i){const n=new ir;new re(i,"doAction",(o,...f)=>n.hasResult?n.getResult():n.store(o(...f))).enable(),new re(i,"undoAction",(o,...f)=>{const _=o(...f);return n.clear(),_}).enable()}let ar=class{constructor(){zt(this,"actions",[]),zt(this,"undoableActions",[])}acceptAction(n,o){const f={action:n,dataModel:o};n.undoSupported()&&(or(n),n.doAction(o),this.undoableActions.push(f)),this.actions.push(f)}undoAll(){this.undoableActions.forEach(({action:n,dataModel:o})=>n.undoAction(o))}getActions(){return this.actions.map(({action:n})=>n)}};function sr(){try{return ge().require("Waze/Action/MultiAction")}catch{return null}}function ur(i){const n=sr();if(!n)throw new Error("Unable to retrieve MultiAction");return new n(i)}let fr=class{constructor(n){zt(this,"_activeTransaction",null),zt(this,"_actionManagerAddInterceptor"),this._actionManagerAddInterceptor=new nr(n,"add",(o,f)=>{var _,O;return(O=(_=this._activeTransaction)==null?void 0:_.acceptAction)==null||O.call(_,f,n.dataModel),!0})}openTransaction(){this._activeTransaction=new ar}closeTransaction(){const n=this._activeTransaction;return this._activeTransaction=null,this._actionManagerAddInterceptor.flushLoggedRequests(),n}get hasTransaction(){return this._activeTransaction!==null}beginTransaction(){this.openTransaction()}commitTransaction(n){if(!this.hasTransaction)throw new Error("No open transaction found");try{const o=this._activeTransaction.getActions(),f=ur(o);n&&(f._description=n),this._actionManagerAddInterceptor.callOriginalInvocator(f)}catch{this._actionManagerAddInterceptor.executeOriginalLoggedRequests()}finally{this.closeTransaction()}}cancelTransaction(){var n;(n=this._activeTransaction)==null||n.undoAll(),this.closeTransaction()}},ne;function Bt(){if(!ne){const i=ge();ne=new fr(i.W.model.actionManager)}return ne}const cr=[new Jt("Editing.beginTransaction",()=>Bt().beginTransaction()),new Jt("Editing.commitTransaction",i=>Bt().commitTransaction(i)),new Jt("Editing.cancelTransaction",()=>Bt().cancelTransaction()),new Jt("Editing.doActions",(i,n)=>{const o=Bt();o.beginTransaction();try{i(),o.commitTransaction(n)}catch(f){throw o.cancelTransaction(),f}})];var lr=Object.defineProperty,hr=(i,n,o)=>n in i?lr(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,Zt=(i,n,o)=>hr(i,typeof n!="symbol"?n+"":n,o),be=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},me={};/*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var Oe;function pr(){if(Oe)return me;Oe=1;var i;return function(n){(function(o){var f=typeof globalThis=="object"?globalThis:typeof be=="object"?be:typeof self=="object"?self:typeof this=="object"?this:j(),_=O(n);typeof f.Reflect<"u"&&(_=O(f.Reflect,_)),o(_,f),typeof f.Reflect>"u"&&(f.Reflect=n);function O(F,I){return function(E,x){Object.defineProperty(F,E,{configurable:!0,writable:!0,value:x}),I&&I(E,x)}}function V(){try{return Function("return this;")()}catch{}}function M(){try{return(0,eval)("(function() { return this; })()")}catch{}}function j(){return V()||M()}})(function(o,f){var _=Object.prototype.hasOwnProperty,O=typeof Symbol=="function",V=O&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",M=O&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",j=typeof Object.create=="function",F={__proto__:[]}instanceof Array,I=!j&&!F,E={create:j?function(){return q(Object.create(null))}:F?function(){return q({__proto__:null})}:function(){return q({})},has:I?function(t,e){return _.call(t,e)}:function(t,e){return e in t},get:I?function(t,e){return _.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},x=Object.getPrototypeOf(Function),R=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Rt(),D=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:At(),K=typeof WeakMap=="function"?WeakMap:Vt(),T=O?Symbol.for("@reflect-metadata:registry"):void 0,$=Pt(),N=It($);function lt(t,e,r,a){if(p(r)){if(!Q(t))throw new TypeError;if(!tt(e))throw new TypeError;return mt(t,e)}else{if(!Q(t))throw new TypeError;if(!g(e))throw new TypeError;if(!g(a)&&!p(a)&&!P(a))throw new TypeError;return P(a)&&(a=void 0),r=S(r),Ot(t,e,r,a)}}o("decorate",lt);function ht(t,e){function r(a,h){if(!g(a))throw new TypeError;if(!p(h)&&!jt(h))throw new TypeError;J(t,e,a,h)}return r}o("metadata",ht);function pt(t,e,r,a){if(!g(r))throw new TypeError;return p(a)||(a=S(a)),J(t,e,r,a)}o("defineMetadata",pt);function dt(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),L(t,e,r)}o("hasMetadata",dt);function yt(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),W(t,e,r)}o("hasOwnMetadata",yt);function _t(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),U(t,e,r)}o("getMetadata",_t);function wt(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),G(t,e,r)}o("getOwnMetadata",wt);function vt(t,e){if(!g(t))throw new TypeError;return p(e)||(e=S(e)),B(t,e)}o("getMetadataKeys",vt);function gt(t,e){if(!g(t))throw new TypeError;return p(e)||(e=S(e)),Z(t,e)}o("getOwnMetadataKeys",gt);function bt(t,e,r){if(!g(e))throw new TypeError;if(p(r)||(r=S(r)),!g(e))throw new TypeError;p(r)||(r=S(r));var a=A(e,r,!1);return p(a)?!1:a.OrdinaryDeleteMetadata(t,e,r)}o("deleteMetadata",bt);function mt(t,e){for(var r=t.length-1;r>=0;--r){var a=t[r],h=a(e);if(!p(h)&&!P(h)){if(!tt(h))throw new TypeError;e=h}}return e}function Ot(t,e,r,a){for(var h=t.length-1;h>=0;--h){var m=t[h],b=m(e,r,a);if(!p(b)&&!P(b)){if(!g(b))throw new TypeError;a=b}}return a}function L(t,e,r){var a=W(t,e,r);if(a)return!0;var h=C(e);return P(h)?!1:L(t,h,r)}function W(t,e,r){var a=A(e,r,!1);return p(a)?!1:X(a.OrdinaryHasOwnMetadata(t,e,r))}function U(t,e,r){var a=W(t,e,r);if(a)return G(t,e,r);var h=C(e);if(!P(h))return U(t,h,r)}function G(t,e,r){var a=A(e,r,!1);if(!p(a))return a.OrdinaryGetOwnMetadata(t,e,r)}function J(t,e,r,a){var h=A(r,a,!0);h.OrdinaryDefineOwnMetadata(t,e,r,a)}function B(t,e){var r=Z(t,e),a=C(t);if(a===null)return r;var h=B(a,e);if(h.length<=0)return r;if(r.length<=0)return h;for(var m=new D,b=[],d=0,s=r;d<s.length;d++){var u=s[d],c=m.has(u);c||(m.add(u),b.push(u))}for(var l=0,y=h;l<y.length;l++){var u=y[l],c=m.has(u);c||(m.add(u),b.push(u))}return b}function Z(t,e){var r=A(t,e,!1);return r?r.OrdinaryOwnMetadataKeys(t,e):[]}function Y(t){if(t===null)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return t===null?1:6;default:return 6}}function p(t){return t===void 0}function P(t){return t===null}function kt(t){return typeof t=="symbol"}function g(t){return typeof t=="object"?t!==null:typeof t=="function"}function St(t,e){switch(Y(t)){case 0:return t;case 1:return t;case 2:return t;case 3:return t;case 4:return t;case 5:return t}var r="string",a=et(t,V);if(a!==void 0){var h=a.call(t,r);if(g(h))throw new TypeError;return h}return Mt(t)}function Mt(t,e){var r,a;{var h=t.toString;if(z(h)){var a=h.call(t);if(!g(a))return a}var r=t.valueOf;if(z(r)){var a=r.call(t);if(!g(a))return a}}throw new TypeError}function X(t){return!!t}function Et(t){return""+t}function S(t){var e=St(t);return kt(e)?e:Et(e)}function Q(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:Object.prototype.toString.call(t)==="[object Array]"}function z(t){return typeof t=="function"}function tt(t){return typeof t=="function"}function jt(t){switch(Y(t)){case 3:return!0;case 4:return!0;default:return!1}}function H(t,e){return t===e||t!==t&&e!==e}function et(t,e){var r=t[e];if(r!=null){if(!z(r))throw new TypeError;return r}}function rt(t){var e=et(t,M);if(!z(e))throw new TypeError;var r=e.call(t);if(!g(r))throw new TypeError;return r}function nt(t){return t.value}function it(t){var e=t.next();return e.done?!1:e}function ot(t){var e=t.return;e&&e.call(t)}function C(t){var e=Object.getPrototypeOf(t);if(typeof t!="function"||t===x||e!==x)return e;var r=t.prototype,a=r&&Object.getPrototypeOf(r);if(a==null||a===Object.prototype)return e;var h=a.constructor;return typeof h!="function"||h===t?e:h}function Tt(){var t;!p(T)&&typeof f.Reflect<"u"&&!(T in f.Reflect)&&typeof f.Reflect.defineMetadata=="function"&&(t=xt(f.Reflect));var e,r,a,h=new K,m={registerProvider:b,getProvider:s,setProvider:c};return m;function b(l){if(!Object.isExtensible(m))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case t===l:break;case p(e):e=l;break;case e===l:break;case p(r):r=l;break;case r===l:break;default:a===void 0&&(a=new D),a.add(l);break}}function d(l,y){if(!p(e)){if(e.isProviderFor(l,y))return e;if(!p(r)){if(r.isProviderFor(l,y))return e;if(!p(a))for(var w=rt(a);;){var v=it(w);if(!v)return;var k=nt(v);if(k.isProviderFor(l,y))return ot(w),k}}}if(!p(t)&&t.isProviderFor(l,y))return t}function s(l,y){var w=h.get(l),v;return p(w)||(v=w.get(y)),p(v)&&(v=d(l,y),p(v)||(p(w)&&(w=new R,h.set(l,w)),w.set(y,v))),v}function u(l){if(p(l))throw new TypeError;return e===l||r===l||!p(a)&&a.has(l)}function c(l,y,w){if(!u(w))throw new Error("Metadata provider not registered.");var v=s(l,y);if(v!==w){if(!p(v))return!1;var k=h.get(l);p(k)&&(k=new R,h.set(l,k)),k.set(y,w)}return!0}}function Pt(){var t;return!p(T)&&g(f.Reflect)&&Object.isExtensible(f.Reflect)&&(t=f.Reflect[T]),p(t)&&(t=Tt()),!p(T)&&g(f.Reflect)&&Object.isExtensible(f.Reflect)&&Object.defineProperty(f.Reflect,T,{enumerable:!1,configurable:!1,writable:!1,value:t}),t}function It(t){var e=new K,r={isProviderFor:function(u,c){var l=e.get(u);return p(l)?!1:l.has(c)},OrdinaryDefineOwnMetadata:b,OrdinaryHasOwnMetadata:h,OrdinaryGetOwnMetadata:m,OrdinaryOwnMetadataKeys:d,OrdinaryDeleteMetadata:s};return $.registerProvider(r),r;function a(u,c,l){var y=e.get(u),w=!1;if(p(y)){if(!l)return;y=new R,e.set(u,y),w=!0}var v=y.get(c);if(p(v)){if(!l)return;if(v=new R,y.set(c,v),!t.setProvider(u,c,r))throw y.delete(c),w&&e.delete(u),new Error("Wrong provider for target.")}return v}function h(u,c,l){var y=a(c,l,!1);return p(y)?!1:X(y.has(u))}function m(u,c,l){var y=a(c,l,!1);if(!p(y))return y.get(u)}function b(u,c,l,y){var w=a(l,y,!0);w.set(u,c)}function d(u,c){var l=[],y=a(u,c,!1);if(p(y))return l;for(var w=y.keys(),v=rt(w),k=0;;){var at=it(v);if(!at)return l.length=k,l;var Ft=nt(at);try{l[k]=Ft}catch($t){try{ot(v)}finally{throw $t}}k++}}function s(u,c,l){var y=a(c,l,!1);if(p(y)||!y.delete(u))return!1;if(y.size===0){var w=e.get(c);p(w)||(w.delete(l),w.size===0&&e.delete(w))}return!0}}function xt(t){var e=t.defineMetadata,r=t.hasOwnMetadata,a=t.getOwnMetadata,h=t.getOwnMetadataKeys,m=t.deleteMetadata,b=new K,d={isProviderFor:function(s,u){var c=b.get(s);return!p(c)&&c.has(u)?!0:h(s,u).length?(p(c)&&(c=new D,b.set(s,c)),c.add(u),!0):!1},OrdinaryDefineOwnMetadata:e,OrdinaryHasOwnMetadata:r,OrdinaryGetOwnMetadata:a,OrdinaryOwnMetadataKeys:h,OrdinaryDeleteMetadata:m};return d}function A(t,e,r){var a=$.getProvider(t,e);if(!p(a))return a;if(r){if($.setProvider(t,e,N))return N;throw new Error("Illegal state.")}}function Rt(){var t={},e=[],r=function(){function d(s,u,c){this._index=0,this._keys=s,this._values=u,this._selector=c}return d.prototype["@@iterator"]=function(){return this},d.prototype[M]=function(){return this},d.prototype.next=function(){var s=this._index;if(s>=0&&s<this._keys.length){var u=this._selector(this._keys[s],this._values[s]);return s+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:u,done:!1}}return{value:void 0,done:!0}},d.prototype.throw=function(s){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),s},d.prototype.return=function(s){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:s,done:!0}},d}(),a=function(){function d(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(d.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),d.prototype.has=function(s){return this._find(s,!1)>=0},d.prototype.get=function(s){var u=this._find(s,!1);return u>=0?this._values[u]:void 0},d.prototype.set=function(s,u){var c=this._find(s,!0);return this._values[c]=u,this},d.prototype.delete=function(s){var u=this._find(s,!1);if(u>=0){for(var c=this._keys.length,l=u+1;l<c;l++)this._keys[l-1]=this._keys[l],this._values[l-1]=this._values[l];return this._keys.length--,this._values.length--,H(s,this._cacheKey)&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},d.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},d.prototype.keys=function(){return new r(this._keys,this._values,h)},d.prototype.values=function(){return new r(this._keys,this._values,m)},d.prototype.entries=function(){return new r(this._keys,this._values,b)},d.prototype["@@iterator"]=function(){return this.entries()},d.prototype[M]=function(){return this.entries()},d.prototype._find=function(s,u){if(!H(this._cacheKey,s)){this._cacheIndex=-1;for(var c=0;c<this._keys.length;c++)if(H(this._keys[c],s)){this._cacheIndex=c;break}}return this._cacheIndex<0&&u&&(this._cacheIndex=this._keys.length,this._keys.push(s),this._values.push(void 0)),this._cacheIndex},d}();return a;function h(d,s){return d}function m(d,s){return s}function b(d,s){return[d,s]}}function At(){var t=function(){function e(){this._map=new R}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(r){return this._map.has(r)},e.prototype.add=function(r){return this._map.set(r,r),this},e.prototype.delete=function(r){return this._map.delete(r)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.keys()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[M]=function(){return this.keys()},e}();return t}function Vt(){var t=16,e=E.create(),r=a();return function(){function s(){this._key=a()}return s.prototype.has=function(u){var c=h(u,!1);return c!==void 0?E.has(c,this._key):!1},s.prototype.get=function(u){var c=h(u,!1);return c!==void 0?E.get(c,this._key):void 0},s.prototype.set=function(u,c){var l=h(u,!0);return l[this._key]=c,this},s.prototype.delete=function(u){var c=h(u,!1);return c!==void 0?delete c[this._key]:!1},s.prototype.clear=function(){this._key=a()},s}();function a(){var s;do s="@@WeakMap@@"+d();while(E.has(e,s));return e[s]=!0,s}function h(s,u){if(!_.call(s,r)){if(!u)return;Object.defineProperty(s,r,{value:E.create()})}return s[r]}function m(s,u){for(var c=0;c<u;++c)s[c]=Math.random()*255|0;return s}function b(s){if(typeof Uint8Array=="function"){var u=new Uint8Array(s);return typeof crypto<"u"?crypto.getRandomValues(u):typeof msCrypto<"u"?msCrypto.getRandomValues(u):m(u,s),u}return m(new Array(s),s)}function d(){var s=b(t);s[6]=s[6]&79|64,s[8]=s[8]&191|128;for(var u="",c=0;c<t;++c){var l=s[c];(c===4||c===6||c===8)&&(u+="-"),l<16&&(u+="0"),u+=l.toString(16).toLowerCase()}return u}}function q(t){return t.__=void 0,delete t.__,t}})}(i||(i={})),me}pr();var dr=Object.defineProperty,yr=(i,n,o)=>n in i?dr(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,Kt=(i,n,o)=>yr(i,typeof n!="symbol"?n+"":n,o);class _r{constructor(n,o){Kt(this,"_target"),Kt(this,"_key"),Kt(this,"_oldValue"),Kt(this,"_wasDefined",!1),Kt(this,"_isSwapped",!1),this._target=n,this._key=o,this._oldValue=this._target[this._key]}get isSwapped(){return this._isSwapped}get originalValue(){return this._oldValue}get value(){return this._target[this._key]}get target(){return this._target}restore(){this.isSwapped&&(this._wasDefined?this._target[this._key]=this._oldValue:delete this._target[this._key],this._isSwapped=!1)}swap(n){this.isSwapped||(this._wasDefined=Object.hasOwn(this._target,this._key),this._oldValue=this._target[this._key]),this._target[this._key]=n,this._isSwapped=!0}}const wr={onlyIfNotExists:!0,isFactory:!1};let ke=class{constructor(n,o,f={}){if(Zt(this,"_installedInstances",new Map),Zt(this,"_path"),Zt(this,"_targetValue"),Zt(this,"_options"),this._path=n.split("."),this._path.length===0)throw new Error("Path must not be empty");this._targetValue=o,this._options={...wr,...f}}_getTargetObject(n){let o=n;for(const f of this._path.slice(0,this._path.length-1))o[f]||(o[f]={}),o=o[f];return o}_createSwapper(n){const o=this._getTargetObject(n);return new _r(o,this._path.at(-1))}install({sdk:n,...o}){if(this._installedInstances.has(n))return;const f=this._createSwapper(n);if(!(f.value&&this._options.onlyIfNotExists)){if(this._options.isFactory&&typeof this._targetValue=="function"){const _=this._targetValue({sdk:n,...o});f.swap(_)}else f.swap(this._targetValue);this._installedInstances.set(n,f)}}uninstall({sdk:n}){const o=this._installedInstances.get(n);o&&(o.restore(),this._installedInstances.delete(n))}};var vr=Object.defineProperty,gr=(i,n,o)=>n in i?vr(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,Wt=(i,n,o)=>gr(i,typeof n!="symbol"?n+"":n,o);let br=class{constructor(i,n){Wt(this,"_target"),Wt(this,"_key"),Wt(this,"_oldValue"),Wt(this,"_wasDefined",!1),Wt(this,"_isSwapped",!1),this._target=i,this._key=n,this._oldValue=this._target[this._key]}get isSwapped(){return this._isSwapped}get originalValue(){return this._oldValue}get value(){return this._target[this._key]}get target(){return this._target}restore(){this.isSwapped&&(this._wasDefined?this._target[this._key]=this._oldValue:delete this._target[this._key],this._isSwapped=!1)}swap(i){this.isSwapped||(this._wasDefined=Object.hasOwn(this._target,this._key),this._oldValue=this._target[this._key]),this._target[this._key]=i,this._isSwapped=!0}};function ie(){return"unsafeWindow"in window?window.unsafeWindow:window}var mr=Object.defineProperty,Or=(i,n,o)=>n in i?mr(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,Se=(i,n,o)=>Or(i,typeof n!="symbol"?n+"":n,o);function Ht(){return"unsafeWindow"in window?window.unsafeWindow:window}var kr=Object.defineProperty,Sr=(i,n,o)=>n in i?kr(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,ut=(i,n,o)=>Sr(i,typeof n!="symbol"?n+"":n,o);class Mr{constructor(n,o){ut(this,"_target"),ut(this,"_key"),ut(this,"_oldValue"),ut(this,"_wasDefined",!1),ut(this,"_isSwapped",!1),this._target=n,this._key=o,this._oldValue=this._target[this._key]}get isSwapped(){return this._isSwapped}get originalValue(){return this._oldValue}get value(){return this._target[this._key]}get target(){return this._target}restore(){this.isSwapped&&(this._wasDefined?this._target[this._key]=this._oldValue:delete this._target[this._key],this._isSwapped=!1)}swap(n){this.isSwapped||(this._wasDefined=Object.hasOwn(this._target,this._key),this._oldValue=this._target[this._key]),this._target[this._key]=n,this._isSwapped=!0}}class Er{constructor(n,o,f){ut(this,"_enabled",!1),ut(this,"_fnSwapper"),ut(this,"_interceptionFunction"),ut(this,"_middlewares",[]),this._fnSwapper=new Mr(n,o),this._interceptionFunction=f}get enabled(){return this._fnSwapper.isSwapped&&this._enabled}disable(){this._enabled=!1,this.enabled&&this._fnSwapper.restore()}enable(){this._enabled=!0,this._fnSwapper.isSwapped||this.swapToInterceptor()}swapToInterceptor(){this._fnSwapper.swap((...n)=>{if(!this._enabled)return this.callOriginalInvocator(...n);const o=this.runMiddlewares(n);if(o){if("output"in o)return o.output;"input"in o&&(n=o.input)}return this._interceptionFunction.call(this._fnSwapper.target,this.getOriginalInvocator(),...n)})}getOriginalInvocator(){return this._fnSwapper.originalValue.bind(this._fnSwapper.target)}callOriginalInvocator(...n){return this.getOriginalInvocator()(...n)}runMiddlewares(n){for(const o of this._middlewares){const f=o(...n);if(f){if("output"in f)return f;"input"in f&&(n=f.input)}}return{input:n}}registerMiddleware(n){this._middlewares.push(n)}}class jr{constructor(n){Se(this,"_fetchInterceptor"),Se(this,"_interceptionFilters",new Set),this._fetchInterceptor=new Er(n,"fetch",(o,f,_)=>{for(const O of this._interceptionFilters)if(O.shouldIntercept(f,_))return this.shouldKeepFilter(O,f,_)||this.removeInterceptionFilter(O),O.intercept(f,_);return o(f,_)})}enable(){this._fetchInterceptor.enable()}disable(){this._fetchInterceptor.disable()}addInterceptionFilter(n){this.enable(),this._interceptionFilters.add(n)}removeInterceptionFilter(n){this._interceptionFilters.delete(n)}shouldKeepFilter(n,o,f){return typeof n.shouldKeep=="function"?n.shouldKeep(o,f):typeof n.shouldKeep=="boolean"?n.shouldKeep:!1}}function Tr(i){return i=i instanceof URL?i:new URL(i,Ht().location.href),n=>typeof n=="string"?new URL(n,Ht().location.href).pathname===i.pathname:n instanceof URL?n.pathname===i.pathname:new URL(n.url,Ht().location.href).pathname===new URL(i,Ht().location.href).pathname}function Pr(i,n,o){const f=new Response(n,o),_=new URL(i,location.toString());return Object.defineProperty(f,"url",{value:_}),f}function Ir(i,n){const o=JSON.stringify(n),f=new Headers({"Content-Type":"application/json"});return Pr(i,o,{headers:f})}const xr=new jr(Ht());function Rr(){const i=ie(),n=new br(i.W.controller.descartesClient,"createAbortController");n.swap(()=>(n.restore(),new AbortController))}function Ar(i){const n=ie();return Rr(),n.W.controller.descartesClient.getFeatures([0,0,0,0],{[i]:!0},{})}async function Vr(i,n){const o=ie().W.Config.paths.features;xr.addInterceptionFilter({shouldIntercept:Tr(o),intercept(){return Promise.resolve(Ir(o,{[i]:{objects:[n]}}))}});const{[i]:f}=await Ar(i),[_]=f.objects;return _.constructor}function Fr(i,n,o={}){const f={type:"Feature"};return(o.id===0||o.id)&&(f.id=o.id),o.bbox&&(f.bbox=o.bbox),f.properties={},f.geometry=i,f}function $r(i,n,o={}){if(!i)throw new Error("coordinates is required");if(!Array.isArray(i))throw new Error("coordinates must be an Array");if(i.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Me(i[0])||!Me(i[1]))throw new Error("coordinates must contain numbers");return Fr({type:"Point",coordinates:i},n,o)}function Me(i){return!isNaN(i)&&i!==null&&!Array.isArray(i)}function Ct(){return"unsafeWindow"in window?window.unsafeWindow:window}function zr(i){const n=Ct().require("Waze/Action/CreateObject");return new n(i)}function Dr(i){Ct().W.model.actionManager.add(zr(i))}function Kr(i){return i.toISOString().slice(0,16).replace("T"," ")}function Wr(i){return Ct().W.model.mapComments.getObjectById(i)}function Hr(i,n){const o=Ct().require("Waze/Action/UpdateObject");return new o(i,n)}function Cr(i,n){Ct().W.model.actionManager.add(Hr(i,n))}let oe;function qr(){if(!oe)throw new Error("MapComment not initialized. Make sure to await the enhancedSDK function before using it.")}const Nr=[{async install(){oe=await Vr("mapComments",{geometry:$r([0,0]).geometry})}},new ke("DataModel.MapComments.addMapComment",i=>{qr();const n=new oe({geoJSONGeometry:i.geometry,subject:i.subject,body:i.body,lockRank:i.lockRank,endDate:i.endDate?Kr(i.endDate):null});return Dr(n),n.getID()}),new ke("DataModel.MapComments.updateMapComment",({sdkInstance:i})=>n=>{const o=Wr(n.mapCommentId);if(!o)throw new i.Errors.DataModelNotFoundError("mapComment",n.mapCommentId);const f={};n.geometry&&(f.geoJSONGeometry=n.geometry),n.subject&&(f.subject=n.subject),n.body&&(f.body=n.body),n.lockRank&&(f.lockRank=n.lockRank),Cr(o,f)},{isFactory:!0})];var Lr=Object.defineProperty,Ur=(i,n,o)=>n in i?Lr(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,Yt=(i,n,o)=>Ur(i,typeof n!="symbol"?n+"":n,o),Ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},je={};/*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var Te;function Gr(){if(Te)return je;Te=1;var i;return function(n){(function(o){var f=typeof globalThis=="object"?globalThis:typeof Ee=="object"?Ee:typeof self=="object"?self:typeof this=="object"?this:j(),_=O(n);typeof f.Reflect<"u"&&(_=O(f.Reflect,_)),o(_,f),typeof f.Reflect>"u"&&(f.Reflect=n);function O(F,I){return function(E,x){Object.defineProperty(F,E,{configurable:!0,writable:!0,value:x}),I&&I(E,x)}}function V(){try{return Function("return this;")()}catch{}}function M(){try{return(0,eval)("(function() { return this; })()")}catch{}}function j(){return V()||M()}})(function(o,f){var _=Object.prototype.hasOwnProperty,O=typeof Symbol=="function",V=O&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",M=O&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",j=typeof Object.create=="function",F={__proto__:[]}instanceof Array,I=!j&&!F,E={create:j?function(){return q(Object.create(null))}:F?function(){return q({__proto__:null})}:function(){return q({})},has:I?function(t,e){return _.call(t,e)}:function(t,e){return e in t},get:I?function(t,e){return _.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},x=Object.getPrototypeOf(Function),R=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Rt(),D=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:At(),K=typeof WeakMap=="function"?WeakMap:Vt(),T=O?Symbol.for("@reflect-metadata:registry"):void 0,$=Pt(),N=It($);function lt(t,e,r,a){if(p(r)){if(!Q(t))throw new TypeError;if(!tt(e))throw new TypeError;return mt(t,e)}else{if(!Q(t))throw new TypeError;if(!g(e))throw new TypeError;if(!g(a)&&!p(a)&&!P(a))throw new TypeError;return P(a)&&(a=void 0),r=S(r),Ot(t,e,r,a)}}o("decorate",lt);function ht(t,e){function r(a,h){if(!g(a))throw new TypeError;if(!p(h)&&!jt(h))throw new TypeError;J(t,e,a,h)}return r}o("metadata",ht);function pt(t,e,r,a){if(!g(r))throw new TypeError;return p(a)||(a=S(a)),J(t,e,r,a)}o("defineMetadata",pt);function dt(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),L(t,e,r)}o("hasMetadata",dt);function yt(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),W(t,e,r)}o("hasOwnMetadata",yt);function _t(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),U(t,e,r)}o("getMetadata",_t);function wt(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),G(t,e,r)}o("getOwnMetadata",wt);function vt(t,e){if(!g(t))throw new TypeError;return p(e)||(e=S(e)),B(t,e)}o("getMetadataKeys",vt);function gt(t,e){if(!g(t))throw new TypeError;return p(e)||(e=S(e)),Z(t,e)}o("getOwnMetadataKeys",gt);function bt(t,e,r){if(!g(e))throw new TypeError;if(p(r)||(r=S(r)),!g(e))throw new TypeError;p(r)||(r=S(r));var a=A(e,r,!1);return p(a)?!1:a.OrdinaryDeleteMetadata(t,e,r)}o("deleteMetadata",bt);function mt(t,e){for(var r=t.length-1;r>=0;--r){var a=t[r],h=a(e);if(!p(h)&&!P(h)){if(!tt(h))throw new TypeError;e=h}}return e}function Ot(t,e,r,a){for(var h=t.length-1;h>=0;--h){var m=t[h],b=m(e,r,a);if(!p(b)&&!P(b)){if(!g(b))throw new TypeError;a=b}}return a}function L(t,e,r){var a=W(t,e,r);if(a)return!0;var h=C(e);return P(h)?!1:L(t,h,r)}function W(t,e,r){var a=A(e,r,!1);return p(a)?!1:X(a.OrdinaryHasOwnMetadata(t,e,r))}function U(t,e,r){var a=W(t,e,r);if(a)return G(t,e,r);var h=C(e);if(!P(h))return U(t,h,r)}function G(t,e,r){var a=A(e,r,!1);if(!p(a))return a.OrdinaryGetOwnMetadata(t,e,r)}function J(t,e,r,a){var h=A(r,a,!0);h.OrdinaryDefineOwnMetadata(t,e,r,a)}function B(t,e){var r=Z(t,e),a=C(t);if(a===null)return r;var h=B(a,e);if(h.length<=0)return r;if(r.length<=0)return h;for(var m=new D,b=[],d=0,s=r;d<s.length;d++){var u=s[d],c=m.has(u);c||(m.add(u),b.push(u))}for(var l=0,y=h;l<y.length;l++){var u=y[l],c=m.has(u);c||(m.add(u),b.push(u))}return b}function Z(t,e){var r=A(t,e,!1);return r?r.OrdinaryOwnMetadataKeys(t,e):[]}function Y(t){if(t===null)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return t===null?1:6;default:return 6}}function p(t){return t===void 0}function P(t){return t===null}function kt(t){return typeof t=="symbol"}function g(t){return typeof t=="object"?t!==null:typeof t=="function"}function St(t,e){switch(Y(t)){case 0:return t;case 1:return t;case 2:return t;case 3:return t;case 4:return t;case 5:return t}var r="string",a=et(t,V);if(a!==void 0){var h=a.call(t,r);if(g(h))throw new TypeError;return h}return Mt(t)}function Mt(t,e){var r,a;{var h=t.toString;if(z(h)){var a=h.call(t);if(!g(a))return a}var r=t.valueOf;if(z(r)){var a=r.call(t);if(!g(a))return a}}throw new TypeError}function X(t){return!!t}function Et(t){return""+t}function S(t){var e=St(t);return kt(e)?e:Et(e)}function Q(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:Object.prototype.toString.call(t)==="[object Array]"}function z(t){return typeof t=="function"}function tt(t){return typeof t=="function"}function jt(t){switch(Y(t)){case 3:return!0;case 4:return!0;default:return!1}}function H(t,e){return t===e||t!==t&&e!==e}function et(t,e){var r=t[e];if(r!=null){if(!z(r))throw new TypeError;return r}}function rt(t){var e=et(t,M);if(!z(e))throw new TypeError;var r=e.call(t);if(!g(r))throw new TypeError;return r}function nt(t){return t.value}function it(t){var e=t.next();return e.done?!1:e}function ot(t){var e=t.return;e&&e.call(t)}function C(t){var e=Object.getPrototypeOf(t);if(typeof t!="function"||t===x||e!==x)return e;var r=t.prototype,a=r&&Object.getPrototypeOf(r);if(a==null||a===Object.prototype)return e;var h=a.constructor;return typeof h!="function"||h===t?e:h}function Tt(){var t;!p(T)&&typeof f.Reflect<"u"&&!(T in f.Reflect)&&typeof f.Reflect.defineMetadata=="function"&&(t=xt(f.Reflect));var e,r,a,h=new K,m={registerProvider:b,getProvider:s,setProvider:c};return m;function b(l){if(!Object.isExtensible(m))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case t===l:break;case p(e):e=l;break;case e===l:break;case p(r):r=l;break;case r===l:break;default:a===void 0&&(a=new D),a.add(l);break}}function d(l,y){if(!p(e)){if(e.isProviderFor(l,y))return e;if(!p(r)){if(r.isProviderFor(l,y))return e;if(!p(a))for(var w=rt(a);;){var v=it(w);if(!v)return;var k=nt(v);if(k.isProviderFor(l,y))return ot(w),k}}}if(!p(t)&&t.isProviderFor(l,y))return t}function s(l,y){var w=h.get(l),v;return p(w)||(v=w.get(y)),p(v)&&(v=d(l,y),p(v)||(p(w)&&(w=new R,h.set(l,w)),w.set(y,v))),v}function u(l){if(p(l))throw new TypeError;return e===l||r===l||!p(a)&&a.has(l)}function c(l,y,w){if(!u(w))throw new Error("Metadata provider not registered.");var v=s(l,y);if(v!==w){if(!p(v))return!1;var k=h.get(l);p(k)&&(k=new R,h.set(l,k)),k.set(y,w)}return!0}}function Pt(){var t;return!p(T)&&g(f.Reflect)&&Object.isExtensible(f.Reflect)&&(t=f.Reflect[T]),p(t)&&(t=Tt()),!p(T)&&g(f.Reflect)&&Object.isExtensible(f.Reflect)&&Object.defineProperty(f.Reflect,T,{enumerable:!1,configurable:!1,writable:!1,value:t}),t}function It(t){var e=new K,r={isProviderFor:function(u,c){var l=e.get(u);return p(l)?!1:l.has(c)},OrdinaryDefineOwnMetadata:b,OrdinaryHasOwnMetadata:h,OrdinaryGetOwnMetadata:m,OrdinaryOwnMetadataKeys:d,OrdinaryDeleteMetadata:s};return $.registerProvider(r),r;function a(u,c,l){var y=e.get(u),w=!1;if(p(y)){if(!l)return;y=new R,e.set(u,y),w=!0}var v=y.get(c);if(p(v)){if(!l)return;if(v=new R,y.set(c,v),!t.setProvider(u,c,r))throw y.delete(c),w&&e.delete(u),new Error("Wrong provider for target.")}return v}function h(u,c,l){var y=a(c,l,!1);return p(y)?!1:X(y.has(u))}function m(u,c,l){var y=a(c,l,!1);if(!p(y))return y.get(u)}function b(u,c,l,y){var w=a(l,y,!0);w.set(u,c)}function d(u,c){var l=[],y=a(u,c,!1);if(p(y))return l;for(var w=y.keys(),v=rt(w),k=0;;){var at=it(v);if(!at)return l.length=k,l;var Ft=nt(at);try{l[k]=Ft}catch($t){try{ot(v)}finally{throw $t}}k++}}function s(u,c,l){var y=a(c,l,!1);if(p(y)||!y.delete(u))return!1;if(y.size===0){var w=e.get(c);p(w)||(w.delete(l),w.size===0&&e.delete(w))}return!0}}function xt(t){var e=t.defineMetadata,r=t.hasOwnMetadata,a=t.getOwnMetadata,h=t.getOwnMetadataKeys,m=t.deleteMetadata,b=new K,d={isProviderFor:function(s,u){var c=b.get(s);return!p(c)&&c.has(u)?!0:h(s,u).length?(p(c)&&(c=new D,b.set(s,c)),c.add(u),!0):!1},OrdinaryDefineOwnMetadata:e,OrdinaryHasOwnMetadata:r,OrdinaryGetOwnMetadata:a,OrdinaryOwnMetadataKeys:h,OrdinaryDeleteMetadata:m};return d}function A(t,e,r){var a=$.getProvider(t,e);if(!p(a))return a;if(r){if($.setProvider(t,e,N))return N;throw new Error("Illegal state.")}}function Rt(){var t={},e=[],r=function(){function d(s,u,c){this._index=0,this._keys=s,this._values=u,this._selector=c}return d.prototype["@@iterator"]=function(){return this},d.prototype[M]=function(){return this},d.prototype.next=function(){var s=this._index;if(s>=0&&s<this._keys.length){var u=this._selector(this._keys[s],this._values[s]);return s+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:u,done:!1}}return{value:void 0,done:!0}},d.prototype.throw=function(s){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),s},d.prototype.return=function(s){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:s,done:!0}},d}(),a=function(){function d(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(d.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),d.prototype.has=function(s){return this._find(s,!1)>=0},d.prototype.get=function(s){var u=this._find(s,!1);return u>=0?this._values[u]:void 0},d.prototype.set=function(s,u){var c=this._find(s,!0);return this._values[c]=u,this},d.prototype.delete=function(s){var u=this._find(s,!1);if(u>=0){for(var c=this._keys.length,l=u+1;l<c;l++)this._keys[l-1]=this._keys[l],this._values[l-1]=this._values[l];return this._keys.length--,this._values.length--,H(s,this._cacheKey)&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},d.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},d.prototype.keys=function(){return new r(this._keys,this._values,h)},d.prototype.values=function(){return new r(this._keys,this._values,m)},d.prototype.entries=function(){return new r(this._keys,this._values,b)},d.prototype["@@iterator"]=function(){return this.entries()},d.prototype[M]=function(){return this.entries()},d.prototype._find=function(s,u){if(!H(this._cacheKey,s)){this._cacheIndex=-1;for(var c=0;c<this._keys.length;c++)if(H(this._keys[c],s)){this._cacheIndex=c;break}}return this._cacheIndex<0&&u&&(this._cacheIndex=this._keys.length,this._keys.push(s),this._values.push(void 0)),this._cacheIndex},d}();return a;function h(d,s){return d}function m(d,s){return s}function b(d,s){return[d,s]}}function At(){var t=function(){function e(){this._map=new R}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(r){return this._map.has(r)},e.prototype.add=function(r){return this._map.set(r,r),this},e.prototype.delete=function(r){return this._map.delete(r)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.keys()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[M]=function(){return this.keys()},e}();return t}function Vt(){var t=16,e=E.create(),r=a();return function(){function s(){this._key=a()}return s.prototype.has=function(u){var c=h(u,!1);return c!==void 0?E.has(c,this._key):!1},s.prototype.get=function(u){var c=h(u,!1);return c!==void 0?E.get(c,this._key):void 0},s.prototype.set=function(u,c){var l=h(u,!0);return l[this._key]=c,this},s.prototype.delete=function(u){var c=h(u,!1);return c!==void 0?delete c[this._key]:!1},s.prototype.clear=function(){this._key=a()},s}();function a(){var s;do s="@@WeakMap@@"+d();while(E.has(e,s));return e[s]=!0,s}function h(s,u){if(!_.call(s,r)){if(!u)return;Object.defineProperty(s,r,{value:E.create()})}return s[r]}function m(s,u){for(var c=0;c<u;++c)s[c]=Math.random()*255|0;return s}function b(s){if(typeof Uint8Array=="function"){var u=new Uint8Array(s);return typeof crypto<"u"?crypto.getRandomValues(u):typeof msCrypto<"u"?msCrypto.getRandomValues(u):m(u,s),u}return m(new Array(s),s)}function d(){var s=b(t);s[6]=s[6]&79|64,s[8]=s[8]&191|128;for(var u="",c=0;c<t;++c){var l=s[c];(c===4||c===6||c===8)&&(u+="-"),l<16&&(u+="0"),u+=l.toString(16).toLowerCase()}return u}}function q(t){return t.__=void 0,delete t.__,t}})}(i||(i={})),je}Gr();var Jr=Object.defineProperty,Br=(i,n,o)=>n in i?Jr(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,qt=(i,n,o)=>Br(i,typeof n!="symbol"?n+"":n,o);let Zr=class{constructor(n,o){qt(this,"_target"),qt(this,"_key"),qt(this,"_oldValue"),qt(this,"_wasDefined",!1),qt(this,"_isSwapped",!1),this._target=n,this._key=o,this._oldValue=this._target[this._key]}get isSwapped(){return this._isSwapped}get originalValue(){return this._oldValue}get value(){return this._target[this._key]}get target(){return this._target}restore(){this.isSwapped&&(this._wasDefined?this._target[this._key]=this._oldValue:delete this._target[this._key],this._isSwapped=!1)}swap(n){this.isSwapped||(this._wasDefined=Object.hasOwn(this._target,this._key),this._oldValue=this._target[this._key]),this._target[this._key]=n,this._isSwapped=!0}};const Yr={onlyIfNotExists:!0,isFactory:!1};class ae{constructor(n,o,f={}){if(Yt(this,"_installedInstances",new Map),Yt(this,"_path"),Yt(this,"_targetValue"),Yt(this,"_options"),this._path=n.split("."),this._path.length===0)throw new Error("Path must not be empty");this._targetValue=o,this._options={...Yr,...f}}_getTargetObject(n){let o=n;for(const f of this._path.slice(0,this._path.length-1))o[f]||(o[f]={}),o=o[f];return o}_createSwapper(n){const o=this._getTargetObject(n);return new Zr(o,this._path.at(-1))}install({sdk:n,...o}){if(this._installedInstances.has(n))return;const f=this._createSwapper(n);if(!(f.value&&this._options.onlyIfNotExists)){if(this._options.isFactory&&typeof this._targetValue=="function"){const _=this._targetValue({sdk:n,...o});f.swap(_)}else f.swap(this._targetValue);this._installedInstances.set(n,f)}}uninstall({sdk:n}){const o=this._installedInstances.get(n);o&&(o.restore(),this._installedInstances.delete(n))}}var Xr=Object.defineProperty,Qr=(i,n,o)=>n in i?Xr(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,Nt=(i,n,o)=>Qr(i,typeof n!="symbol"?n+"":n,o);let Pe=class{constructor(i,n){Nt(this,"_target"),Nt(this,"_key"),Nt(this,"_oldValue"),Nt(this,"_wasDefined",!1),Nt(this,"_isSwapped",!1),this._target=i,this._key=n,this._oldValue=this._target[this._key]}get isSwapped(){return this._isSwapped}get originalValue(){return this._oldValue}get value(){return this._target[this._key]}get target(){return this._target}restore(){this.isSwapped&&(this._wasDefined?this._target[this._key]=this._oldValue:delete this._target[this._key],this._isSwapped=!1)}swap(i){this.isSwapped||(this._wasDefined=Object.hasOwn(this._target,this._key),this._oldValue=this._target[this._key]),this._target[this._key]=i,this._isSwapped=!0}};function se(){return"unsafeWindow"in window?window.unsafeWindow:window}async function tn(i){const n=[],o=new Pe(se().W.model.actionManager,"add");o.swap(f=>{n.push(f)});try{await i()}finally{o.restore()}return n}function en(i){return i.memoizedProps||{}}function rn(i){return typeof i=="object"&&i!==null&&"memoizedState"in i&&Array.isArray(i.memoizedState)&&i.memoizedState.length===2&&"queue"in i&&i.queue===null&&Array.isArray(i.memoizedState[1])}function nn(i){return typeof i=="object"&&i!==null&&"memoizedState"in i&&typeof i.memoizedState=="object"&&i.memoizedState!==null&&"current"in i.memoizedState&&"queue"in i&&i.queue===null}function on(i){return typeof i=="object"&&i!==null&&"memoizedState"in i&&"queue"in i&&typeof i.queue=="object"&&i.queue!==null&&"dispatch"in i.queue&&typeof i.queue.dispatch=="function"}function an(i){return on(i)?{type:"useState",value:i.memoizedState,dispatch:i.queue.dispatch}:rn(i)?{type:"useMemo",value:i.memoizedState[0],dependencies:i.memoizedState[1]}:nn(i)?{type:"useRef",current:i.memoizedState}:null}function sn(i,n){const o=[];let f=i.memoizedState;for(;f;){const _=an(f);_&&o.push(_),f=f.next}return o}function un(i,n,o=1/0){let f=i,_=0;for(;f&&_<o;){const O=f.memoizedState?sn(f):[],V=en(f),M={fiber:f,hooks:{all:O,useState:O.filter(j=>j.type==="useState"),useMemo:O.filter(j=>j.type==="useMemo"),useRef:O.filter(j=>j.type==="useRef")},props:V};if(n(M))return M;f=f.return,_++}return null}const fn="__reactFiber$";function cn(i){const n=Object.keys(i).find(f=>f.startsWith(fn));if(!n)throw new Error(`No fiber key found for element: ${i}`);const o=i[n];if(!o)throw new Error(`No fiber found for element: ${i}`);return o}const ln=i=>new Promise(n=>{const o=se(),f=new Pe(o.W.map.olMap,"addControl");f.swap(_=>{i==null||i(_),n(_),f.restore()})});function hn(i){const n=se(),o=n.W.userscripts.toOLGeometry(i);return new n.OpenLayers.Feature.Vector(o)}async function pn(i,n){const o=un(cn(i),O=>"onClick"in O.props&&typeof O.props.onClick=="function");if(!o)throw new Error("No fiber found with draw initiator");const{onClick:f}=o.props;//! OpenLayers dependent code below - implementation might change over time
const _=ln(O=>{O.activate=()=>{}});f(new Event("click")),(await _).events.triggerEvent("featureadded",{feature:hn(n)})}var dn=Object.defineProperty,yn=(i,n,o)=>n in i?dn(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,Ie=(i,n,o)=>yn(i,typeof n!="symbol"?n+"":n,o);function _n(){return"unsafeWindow"in window?window.unsafeWindow:window}var wn=Object.defineProperty,vn=(i,n,o)=>n in i?wn(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,ft=(i,n,o)=>vn(i,typeof n!="symbol"?n+"":n,o);let gn=class{constructor(n,o){ft(this,"_target"),ft(this,"_key"),ft(this,"_oldValue"),ft(this,"_wasDefined",!1),ft(this,"_isSwapped",!1),this._target=n,this._key=o,this._oldValue=this._target[this._key]}get isSwapped(){return this._isSwapped}get originalValue(){return this._oldValue}get value(){return this._target[this._key]}get target(){return this._target}restore(){this.isSwapped&&(this._wasDefined?this._target[this._key]=this._oldValue:delete this._target[this._key],this._isSwapped=!1)}swap(n){this.isSwapped||(this._wasDefined=Object.hasOwn(this._target,this._key),this._oldValue=this._target[this._key]),this._target[this._key]=n,this._isSwapped=!0}},bn=class{constructor(n,o,f){ft(this,"_enabled",!1),ft(this,"_fnSwapper"),ft(this,"_interceptionFunction"),ft(this,"_middlewares",[]),this._fnSwapper=new gn(n,o),this._interceptionFunction=f}get enabled(){return this._fnSwapper.isSwapped&&this._enabled}disable(){this._enabled=!1,this.enabled&&this._fnSwapper.restore()}enable(){this._enabled=!0,this._fnSwapper.isSwapped||this.swapToInterceptor()}swapToInterceptor(){this._fnSwapper.swap((...n)=>{if(!this._enabled)return this.callOriginalInvocator(...n);const o=this.runMiddlewares(n);if(o){if("output"in o)return o.output;"input"in o&&(n=o.input)}return this._interceptionFunction.call(this._fnSwapper.target,this.getOriginalInvocator(),...n)})}getOriginalInvocator(){return this._fnSwapper.originalValue.bind(this._fnSwapper.target)}callOriginalInvocator(...n){return this.getOriginalInvocator()(...n)}runMiddlewares(n){for(const o of this._middlewares){const f=o(...n);if(f){if("output"in f)return f;"input"in f&&(n=f.input)}}return{input:n}}registerMiddleware(n){this._middlewares.push(n)}},mn=class{constructor(n){Ie(this,"_fetchInterceptor"),Ie(this,"_interceptionFilters",new Set),this._fetchInterceptor=new bn(n,"fetch",(o,f,_)=>{for(const O of this._interceptionFilters)if(O.shouldIntercept(f,_))return this.shouldKeepFilter(O,f,_)||this.removeInterceptionFilter(O),O.intercept(f,_);return o(f,_)})}enable(){this._fetchInterceptor.enable()}disable(){this._fetchInterceptor.disable()}addInterceptionFilter(n){this.enable(),this._interceptionFilters.add(n)}removeInterceptionFilter(n){this._interceptionFilters.delete(n)}shouldKeepFilter(n,o,f){return typeof n.shouldKeep=="function"?n.shouldKeep(o,f):typeof n.shouldKeep=="boolean"?n.shouldKeep:!1}};new mn(_n());function On(i,n,o={}){const f={type:"Feature"};return(o.id===0||o.id)&&(f.id=o.id),o.bbox&&(f.bbox=o.bbox),f.properties={},f.geometry=i,f}function kn(i,n,o={}){for(const f of i){if(f.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(f[f.length-1].length!==f[0].length)throw new Error("First and last Position are not equivalent.");for(let _=0;_<f[f.length-1].length;_++)if(f[f.length-1][_]!==f[0][_])throw new Error("First and last Position are not equivalent.")}return On({type:"Polygon",coordinates:i},n,o)}function Xt(){return"unsafeWindow"in window?window.unsafeWindow:window}function Sn(i,n,o){const f=new i(o),_=new n(f);return Xt().W.model.actionManager.add(_),f}function xe(i){return Xt().W.model.permanentHazards.getObjectById(i)}function Mn(i,n){const o=Xt().require("Waze/Action/UpdateObject");return new o(i,n)}function En(i,n){Xt().W.model.actionManager.add(Mn(i,n))}function jn(i){return Object.fromEntries(Object.entries(i).filter(([,n])=>n!==void 0))}let ue,fe;const Tn=[{async install(){const i=document.querySelector("#drawer wz-menu > wz-menu-sub-menu:nth-child(3) > wz-menu-item:nth-of-type(2)");if(!i||!(i instanceof HTMLElement))throw new Error("Unable to find school zone drawing menu item");const[n]=await tn(async()=>{await pn(i,kn([[[0,0],[0,1],[1,1],[0,0]]]).geometry)});if(n.actionName!=="ADD_PERMANENT_HAZARD")throw new Error("Unexpected action discovered when tried to resolve AddPermanentHazard action: "+n.actionName);const o=n.object;if(!o)throw new Error("Unexpected state: Added object does not exist");if(o.type!=="permanentHazard")throw new Error("Unexpected state: Expected the added object to be a PermanentHazard instead of "+n.type);ue=n.constructor,fe=o.constructor}},new ae("DataModel.PermanentHazards.addSchoolZone",i=>{if(!fe||!ue)throw new Error("PermanentHazard or AddPermanentHazard are not initialized. Make sure to await the enhancedSDK function before using it.");return Sn(fe,ue,{type:9,geoJSONGeometry:i.geometry,name:i.name,speedLimit:i.speedLimit,excludedRoadTypes:i.excludedRoadTypes}).getID()}),new ae("DataModel.PermanentHazards.updateSchoolZone",({sdkInstance:i})=>n=>{const o=xe(n.schoolZoneId);if(!o||o.getAttribute("type")!==9)throw new i.Errors.DataModelNotFoundError("permanentHazard.SchoolZone",n.schoolZoneId);En(o,jn({geoJSONGeometry:n.geometry,name:n.name,speedLimit:n.speedLimit,excludedRoadTypes:n.excludedRoadTypes}))},{isFactory:!0}),new ae("DataModel.PermanentHazards.getSchoolZoneById",()=>i=>{const n=xe(i.schoolZoneId);return!n||n.getAttribute("type")!==9?null:n},{isFactory:!0})];var Pn=Object.defineProperty,In=(i,n,o)=>n in i?Pn(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,Qt=(i,n,o)=>In(i,typeof n!="symbol"?n+"":n,o),Re=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ae={};/*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0

  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.

  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */var Ve;function xn(){if(Ve)return Ae;Ve=1;var i;return function(n){(function(o){var f=typeof globalThis=="object"?globalThis:typeof Re=="object"?Re:typeof self=="object"?self:typeof this=="object"?this:j(),_=O(n);typeof f.Reflect<"u"&&(_=O(f.Reflect,_)),o(_,f),typeof f.Reflect>"u"&&(f.Reflect=n);function O(F,I){return function(E,x){Object.defineProperty(F,E,{configurable:!0,writable:!0,value:x}),I&&I(E,x)}}function V(){try{return Function("return this;")()}catch{}}function M(){try{return(0,eval)("(function() { return this; })()")}catch{}}function j(){return V()||M()}})(function(o,f){var _=Object.prototype.hasOwnProperty,O=typeof Symbol=="function",V=O&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",M=O&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",j=typeof Object.create=="function",F={__proto__:[]}instanceof Array,I=!j&&!F,E={create:j?function(){return q(Object.create(null))}:F?function(){return q({__proto__:null})}:function(){return q({})},has:I?function(t,e){return _.call(t,e)}:function(t,e){return e in t},get:I?function(t,e){return _.call(t,e)?t[e]:void 0}:function(t,e){return t[e]}},x=Object.getPrototypeOf(Function),R=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Rt(),D=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:At(),K=typeof WeakMap=="function"?WeakMap:Vt(),T=O?Symbol.for("@reflect-metadata:registry"):void 0,$=Pt(),N=It($);function lt(t,e,r,a){if(p(r)){if(!Q(t))throw new TypeError;if(!tt(e))throw new TypeError;return mt(t,e)}else{if(!Q(t))throw new TypeError;if(!g(e))throw new TypeError;if(!g(a)&&!p(a)&&!P(a))throw new TypeError;return P(a)&&(a=void 0),r=S(r),Ot(t,e,r,a)}}o("decorate",lt);function ht(t,e){function r(a,h){if(!g(a))throw new TypeError;if(!p(h)&&!jt(h))throw new TypeError;J(t,e,a,h)}return r}o("metadata",ht);function pt(t,e,r,a){if(!g(r))throw new TypeError;return p(a)||(a=S(a)),J(t,e,r,a)}o("defineMetadata",pt);function dt(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),L(t,e,r)}o("hasMetadata",dt);function yt(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),W(t,e,r)}o("hasOwnMetadata",yt);function _t(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),U(t,e,r)}o("getMetadata",_t);function wt(t,e,r){if(!g(e))throw new TypeError;return p(r)||(r=S(r)),G(t,e,r)}o("getOwnMetadata",wt);function vt(t,e){if(!g(t))throw new TypeError;return p(e)||(e=S(e)),B(t,e)}o("getMetadataKeys",vt);function gt(t,e){if(!g(t))throw new TypeError;return p(e)||(e=S(e)),Z(t,e)}o("getOwnMetadataKeys",gt);function bt(t,e,r){if(!g(e))throw new TypeError;if(p(r)||(r=S(r)),!g(e))throw new TypeError;p(r)||(r=S(r));var a=A(e,r,!1);return p(a)?!1:a.OrdinaryDeleteMetadata(t,e,r)}o("deleteMetadata",bt);function mt(t,e){for(var r=t.length-1;r>=0;--r){var a=t[r],h=a(e);if(!p(h)&&!P(h)){if(!tt(h))throw new TypeError;e=h}}return e}function Ot(t,e,r,a){for(var h=t.length-1;h>=0;--h){var m=t[h],b=m(e,r,a);if(!p(b)&&!P(b)){if(!g(b))throw new TypeError;a=b}}return a}function L(t,e,r){var a=W(t,e,r);if(a)return!0;var h=C(e);return P(h)?!1:L(t,h,r)}function W(t,e,r){var a=A(e,r,!1);return p(a)?!1:X(a.OrdinaryHasOwnMetadata(t,e,r))}function U(t,e,r){var a=W(t,e,r);if(a)return G(t,e,r);var h=C(e);if(!P(h))return U(t,h,r)}function G(t,e,r){var a=A(e,r,!1);if(!p(a))return a.OrdinaryGetOwnMetadata(t,e,r)}function J(t,e,r,a){var h=A(r,a,!0);h.OrdinaryDefineOwnMetadata(t,e,r,a)}function B(t,e){var r=Z(t,e),a=C(t);if(a===null)return r;var h=B(a,e);if(h.length<=0)return r;if(r.length<=0)return h;for(var m=new D,b=[],d=0,s=r;d<s.length;d++){var u=s[d],c=m.has(u);c||(m.add(u),b.push(u))}for(var l=0,y=h;l<y.length;l++){var u=y[l],c=m.has(u);c||(m.add(u),b.push(u))}return b}function Z(t,e){var r=A(t,e,!1);return r?r.OrdinaryOwnMetadataKeys(t,e):[]}function Y(t){if(t===null)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return t===null?1:6;default:return 6}}function p(t){return t===void 0}function P(t){return t===null}function kt(t){return typeof t=="symbol"}function g(t){return typeof t=="object"?t!==null:typeof t=="function"}function St(t,e){switch(Y(t)){case 0:return t;case 1:return t;case 2:return t;case 3:return t;case 4:return t;case 5:return t}var r="string",a=et(t,V);if(a!==void 0){var h=a.call(t,r);if(g(h))throw new TypeError;return h}return Mt(t)}function Mt(t,e){var r,a;{var h=t.toString;if(z(h)){var a=h.call(t);if(!g(a))return a}var r=t.valueOf;if(z(r)){var a=r.call(t);if(!g(a))return a}}throw new TypeError}function X(t){return!!t}function Et(t){return""+t}function S(t){var e=St(t);return kt(e)?e:Et(e)}function Q(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:Object.prototype.toString.call(t)==="[object Array]"}function z(t){return typeof t=="function"}function tt(t){return typeof t=="function"}function jt(t){switch(Y(t)){case 3:return!0;case 4:return!0;default:return!1}}function H(t,e){return t===e||t!==t&&e!==e}function et(t,e){var r=t[e];if(r!=null){if(!z(r))throw new TypeError;return r}}function rt(t){var e=et(t,M);if(!z(e))throw new TypeError;var r=e.call(t);if(!g(r))throw new TypeError;return r}function nt(t){return t.value}function it(t){var e=t.next();return e.done?!1:e}function ot(t){var e=t.return;e&&e.call(t)}function C(t){var e=Object.getPrototypeOf(t);if(typeof t!="function"||t===x||e!==x)return e;var r=t.prototype,a=r&&Object.getPrototypeOf(r);if(a==null||a===Object.prototype)return e;var h=a.constructor;return typeof h!="function"||h===t?e:h}function Tt(){var t;!p(T)&&typeof f.Reflect<"u"&&!(T in f.Reflect)&&typeof f.Reflect.defineMetadata=="function"&&(t=xt(f.Reflect));var e,r,a,h=new K,m={registerProvider:b,getProvider:s,setProvider:c};return m;function b(l){if(!Object.isExtensible(m))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case t===l:break;case p(e):e=l;break;case e===l:break;case p(r):r=l;break;case r===l:break;default:a===void 0&&(a=new D),a.add(l);break}}function d(l,y){if(!p(e)){if(e.isProviderFor(l,y))return e;if(!p(r)){if(r.isProviderFor(l,y))return e;if(!p(a))for(var w=rt(a);;){var v=it(w);if(!v)return;var k=nt(v);if(k.isProviderFor(l,y))return ot(w),k}}}if(!p(t)&&t.isProviderFor(l,y))return t}function s(l,y){var w=h.get(l),v;return p(w)||(v=w.get(y)),p(v)&&(v=d(l,y),p(v)||(p(w)&&(w=new R,h.set(l,w)),w.set(y,v))),v}function u(l){if(p(l))throw new TypeError;return e===l||r===l||!p(a)&&a.has(l)}function c(l,y,w){if(!u(w))throw new Error("Metadata provider not registered.");var v=s(l,y);if(v!==w){if(!p(v))return!1;var k=h.get(l);p(k)&&(k=new R,h.set(l,k)),k.set(y,w)}return!0}}function Pt(){var t;return!p(T)&&g(f.Reflect)&&Object.isExtensible(f.Reflect)&&(t=f.Reflect[T]),p(t)&&(t=Tt()),!p(T)&&g(f.Reflect)&&Object.isExtensible(f.Reflect)&&Object.defineProperty(f.Reflect,T,{enumerable:!1,configurable:!1,writable:!1,value:t}),t}function It(t){var e=new K,r={isProviderFor:function(u,c){var l=e.get(u);return p(l)?!1:l.has(c)},OrdinaryDefineOwnMetadata:b,OrdinaryHasOwnMetadata:h,OrdinaryGetOwnMetadata:m,OrdinaryOwnMetadataKeys:d,OrdinaryDeleteMetadata:s};return $.registerProvider(r),r;function a(u,c,l){var y=e.get(u),w=!1;if(p(y)){if(!l)return;y=new R,e.set(u,y),w=!0}var v=y.get(c);if(p(v)){if(!l)return;if(v=new R,y.set(c,v),!t.setProvider(u,c,r))throw y.delete(c),w&&e.delete(u),new Error("Wrong provider for target.")}return v}function h(u,c,l){var y=a(c,l,!1);return p(y)?!1:X(y.has(u))}function m(u,c,l){var y=a(c,l,!1);if(!p(y))return y.get(u)}function b(u,c,l,y){var w=a(l,y,!0);w.set(u,c)}function d(u,c){var l=[],y=a(u,c,!1);if(p(y))return l;for(var w=y.keys(),v=rt(w),k=0;;){var at=it(v);if(!at)return l.length=k,l;var Ft=nt(at);try{l[k]=Ft}catch($t){try{ot(v)}finally{throw $t}}k++}}function s(u,c,l){var y=a(c,l,!1);if(p(y)||!y.delete(u))return!1;if(y.size===0){var w=e.get(c);p(w)||(w.delete(l),w.size===0&&e.delete(w))}return!0}}function xt(t){var e=t.defineMetadata,r=t.hasOwnMetadata,a=t.getOwnMetadata,h=t.getOwnMetadataKeys,m=t.deleteMetadata,b=new K,d={isProviderFor:function(s,u){var c=b.get(s);return!p(c)&&c.has(u)?!0:h(s,u).length?(p(c)&&(c=new D,b.set(s,c)),c.add(u),!0):!1},OrdinaryDefineOwnMetadata:e,OrdinaryHasOwnMetadata:r,OrdinaryGetOwnMetadata:a,OrdinaryOwnMetadataKeys:h,OrdinaryDeleteMetadata:m};return d}function A(t,e,r){var a=$.getProvider(t,e);if(!p(a))return a;if(r){if($.setProvider(t,e,N))return N;throw new Error("Illegal state.")}}function Rt(){var t={},e=[],r=function(){function d(s,u,c){this._index=0,this._keys=s,this._values=u,this._selector=c}return d.prototype["@@iterator"]=function(){return this},d.prototype[M]=function(){return this},d.prototype.next=function(){var s=this._index;if(s>=0&&s<this._keys.length){var u=this._selector(this._keys[s],this._values[s]);return s+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:u,done:!1}}return{value:void 0,done:!0}},d.prototype.throw=function(s){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),s},d.prototype.return=function(s){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:s,done:!0}},d}(),a=function(){function d(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(d.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),d.prototype.has=function(s){return this._find(s,!1)>=0},d.prototype.get=function(s){var u=this._find(s,!1);return u>=0?this._values[u]:void 0},d.prototype.set=function(s,u){var c=this._find(s,!0);return this._values[c]=u,this},d.prototype.delete=function(s){var u=this._find(s,!1);if(u>=0){for(var c=this._keys.length,l=u+1;l<c;l++)this._keys[l-1]=this._keys[l],this._values[l-1]=this._values[l];return this._keys.length--,this._values.length--,H(s,this._cacheKey)&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},d.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},d.prototype.keys=function(){return new r(this._keys,this._values,h)},d.prototype.values=function(){return new r(this._keys,this._values,m)},d.prototype.entries=function(){return new r(this._keys,this._values,b)},d.prototype["@@iterator"]=function(){return this.entries()},d.prototype[M]=function(){return this.entries()},d.prototype._find=function(s,u){if(!H(this._cacheKey,s)){this._cacheIndex=-1;for(var c=0;c<this._keys.length;c++)if(H(this._keys[c],s)){this._cacheIndex=c;break}}return this._cacheIndex<0&&u&&(this._cacheIndex=this._keys.length,this._keys.push(s),this._values.push(void 0)),this._cacheIndex},d}();return a;function h(d,s){return d}function m(d,s){return s}function b(d,s){return[d,s]}}function At(){var t=function(){function e(){this._map=new R}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(r){return this._map.has(r)},e.prototype.add=function(r){return this._map.set(r,r),this},e.prototype.delete=function(r){return this._map.delete(r)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.keys()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[M]=function(){return this.keys()},e}();return t}function Vt(){var t=16,e=E.create(),r=a();return function(){function s(){this._key=a()}return s.prototype.has=function(u){var c=h(u,!1);return c!==void 0?E.has(c,this._key):!1},s.prototype.get=function(u){var c=h(u,!1);return c!==void 0?E.get(c,this._key):void 0},s.prototype.set=function(u,c){var l=h(u,!0);return l[this._key]=c,this},s.prototype.delete=function(u){var c=h(u,!1);return c!==void 0?delete c[this._key]:!1},s.prototype.clear=function(){this._key=a()},s}();function a(){var s;do s="@@WeakMap@@"+d();while(E.has(e,s));return e[s]=!0,s}function h(s,u){if(!_.call(s,r)){if(!u)return;Object.defineProperty(s,r,{value:E.create()})}return s[r]}function m(s,u){for(var c=0;c<u;++c)s[c]=Math.random()*255|0;return s}function b(s){if(typeof Uint8Array=="function"){var u=new Uint8Array(s);return typeof crypto<"u"?crypto.getRandomValues(u):typeof msCrypto<"u"?msCrypto.getRandomValues(u):m(u,s),u}return m(new Array(s),s)}function d(){var s=b(t);s[6]=s[6]&79|64,s[8]=s[8]&191|128;for(var u="",c=0;c<t;++c){var l=s[c];(c===4||c===6||c===8)&&(u+="-"),l<16&&(u+="0"),u+=l.toString(16).toLowerCase()}return u}}function q(t){return t.__=void 0,delete t.__,t}})}(i||(i={})),Ae}xn();var Rn=Object.defineProperty,An=(i,n,o)=>n in i?Rn(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,Lt=(i,n,o)=>An(i,typeof n!="symbol"?n+"":n,o);class Vn{constructor(n,o){Lt(this,"_target"),Lt(this,"_key"),Lt(this,"_oldValue"),Lt(this,"_wasDefined",!1),Lt(this,"_isSwapped",!1),this._target=n,this._key=o,this._oldValue=this._target[this._key]}get isSwapped(){return this._isSwapped}get originalValue(){return this._oldValue}get value(){return this._target[this._key]}get target(){return this._target}restore(){this.isSwapped&&(this._wasDefined?this._target[this._key]=this._oldValue:delete this._target[this._key],this._isSwapped=!1)}swap(n){this.isSwapped||(this._wasDefined=Object.hasOwn(this._target,this._key),this._oldValue=this._target[this._key]),this._target[this._key]=n,this._isSwapped=!0}}const Fn={onlyIfNotExists:!0,isFactory:!1};class $n{constructor(n,o,f={}){if(Qt(this,"_installedInstances",new Map),Qt(this,"_path"),Qt(this,"_targetValue"),Qt(this,"_options"),this._path=n.split("."),this._path.length===0)throw new Error("Path must not be empty");this._targetValue=o,this._options={...Fn,...f}}_getTargetObject(n){let o=n;for(const f of this._path.slice(0,this._path.length-1))o[f]||(o[f]={}),o=o[f];return o}_createSwapper(n){const o=this._getTargetObject(n);return new Vn(o,this._path.at(-1))}install({sdk:n,...o}){if(this._installedInstances.has(n))return;const f=this._createSwapper(n);if(!(f.value&&this._options.onlyIfNotExists)){if(this._options.isFactory&&typeof this._targetValue=="function"){const _=this._targetValue({sdk:n,...o});f.swap(_)}else f.swap(this._targetValue);this._installedInstances.set(n,f)}}uninstall({sdk:n}){const o=this._installedInstances.get(n);o&&(o.restore(),this._installedInstances.delete(n))}}const Fe=Symbol("BigJunction"),$e=Symbol("AddBigJunction");function zn(){return"unsafeWindow"in window?window.unsafeWindow:window}function Dn(i,n,o){const f=new i(o),_=new n(f);return zn().W.model.actionManager.add(_),f}const Kn=[new $n("DataModel.BigJunctions.addBigJunction",({artifacts:i})=>n=>Dn(i[Fe],i[$e],{geoJSONGeometry:n.geometry}).getID(),{isFactory:!0})];function Wn(i,n,o={}){const f={type:"Feature"};return(o.id===0||o.id)&&(f.id=o.id),o.bbox&&(f.bbox=o.bbox),f.properties={},f.geometry=i,f}function Hn(i,n,o={}){for(const f of i){if(f.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(f[f.length-1].length!==f[0].length)throw new Error("First and last Position are not equivalent.");for(let _=0;_<f[f.length-1].length;_++)if(f[f.length-1][_]!==f[0][_])throw new Error("First and last Position are not equivalent.")}return Wn({type:"Polygon",coordinates:i},n,o)}var Cn=Object.defineProperty,qn=(i,n,o)=>n in i?Cn(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,Ut=(i,n,o)=>qn(i,typeof n!="symbol"?n+"":n,o);let ze=class{constructor(i,n){Ut(this,"_target"),Ut(this,"_key"),Ut(this,"_oldValue"),Ut(this,"_wasDefined",!1),Ut(this,"_isSwapped",!1),this._target=i,this._key=n,this._oldValue=this._target[this._key]}get isSwapped(){return this._isSwapped}get originalValue(){return this._oldValue}get value(){return this._target[this._key]}get target(){return this._target}restore(){this.isSwapped&&(this._wasDefined?this._target[this._key]=this._oldValue:delete this._target[this._key],this._isSwapped=!1)}swap(i){this.isSwapped||(this._wasDefined=Object.hasOwn(this._target,this._key),this._oldValue=this._target[this._key]),this._target[this._key]=i,this._isSwapped=!0}};function ce(){return"unsafeWindow"in window?window.unsafeWindow:window}async function Nn(i){const n=[],o=new ze(ce().W.model.actionManager,"add");o.swap(f=>{n.push(f)});try{await i()}finally{o.restore()}return n}function Ln(i){return i.memoizedProps||{}}function Un(i){return typeof i=="object"&&i!==null&&"memoizedState"in i&&Array.isArray(i.memoizedState)&&i.memoizedState.length===2&&"queue"in i&&i.queue===null&&Array.isArray(i.memoizedState[1])}function Gn(i){return typeof i=="object"&&i!==null&&"memoizedState"in i&&typeof i.memoizedState=="object"&&i.memoizedState!==null&&"current"in i.memoizedState&&"queue"in i&&i.queue===null}function Jn(i){return typeof i=="object"&&i!==null&&"memoizedState"in i&&"queue"in i&&typeof i.queue=="object"&&i.queue!==null&&"dispatch"in i.queue&&typeof i.queue.dispatch=="function"}function Bn(i){return Jn(i)?{type:"useState",value:i.memoizedState,dispatch:i.queue.dispatch}:Un(i)?{type:"useMemo",value:i.memoizedState[0],dependencies:i.memoizedState[1]}:Gn(i)?{type:"useRef",current:i.memoizedState}:null}function Zn(i,n){const o=[];let f=i.memoizedState;for(;f;){const _=Bn(f);_&&o.push(_),f=f.next}return o}function Yn(i,n,o=1/0){let f=i,_=0;for(;f&&_<o;){const O=f.memoizedState?Zn(f):[],V=Ln(f),M={fiber:f,hooks:{all:O,useState:O.filter(j=>j.type==="useState"),useMemo:O.filter(j=>j.type==="useMemo"),useRef:O.filter(j=>j.type==="useRef")},props:V};if(n(M))return M;f=f.return,_++}return null}const Xn="__reactFiber$";function Qn(i){const n=Object.keys(i).find(f=>f.startsWith(Xn));if(!n)throw new Error(`No fiber key found for element: ${i}`);const o=i[n];if(!o)throw new Error(`No fiber found for element: ${i}`);return o}const ti=i=>new Promise(n=>{const o=ce(),f=new ze(o.W.map.olMap,"addControl");f.swap(_=>{i==null||i(_),n(_),f.restore()})});function ei(i){const n=ce(),o=n.W.userscripts.toOLGeometry(i);return new n.OpenLayers.Feature.Vector(o)}async function ri(i,n){const o=Yn(Qn(i),O=>"onClick"in O.props&&typeof O.props.onClick=="function");if(!o)throw new Error("No fiber found with draw initiator");const{onClick:f}=o.props;//! OpenLayers dependent code below - implementation might change over time
const _=ti(O=>{O.activate=()=>{}});f(new Event("click")),(await _).events.triggerEvent("featureadded",{feature:ei(n)})}var ni=Object.defineProperty,ii=(i,n,o)=>n in i?ni(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,De=(i,n,o)=>ii(i,typeof n!="symbol"?n+"":n,o);function oi(){return"unsafeWindow"in window?window.unsafeWindow:window}var ai=Object.defineProperty,si=(i,n,o)=>n in i?ai(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o,ct=(i,n,o)=>si(i,typeof n!="symbol"?n+"":n,o);class ui{constructor(n,o){ct(this,"_target"),ct(this,"_key"),ct(this,"_oldValue"),ct(this,"_wasDefined",!1),ct(this,"_isSwapped",!1),this._target=n,this._key=o,this._oldValue=this._target[this._key]}get isSwapped(){return this._isSwapped}get originalValue(){return this._oldValue}get value(){return this._target[this._key]}get target(){return this._target}restore(){this.isSwapped&&(this._wasDefined?this._target[this._key]=this._oldValue:delete this._target[this._key],this._isSwapped=!1)}swap(n){this.isSwapped||(this._wasDefined=Object.hasOwn(this._target,this._key),this._oldValue=this._target[this._key]),this._target[this._key]=n,this._isSwapped=!0}}class fi{constructor(n,o,f){ct(this,"_enabled",!1),ct(this,"_fnSwapper"),ct(this,"_interceptionFunction"),ct(this,"_middlewares",[]),this._fnSwapper=new ui(n,o),this._interceptionFunction=f}get enabled(){return this._fnSwapper.isSwapped&&this._enabled}disable(){this._enabled=!1,this.enabled&&this._fnSwapper.restore()}enable(){this._enabled=!0,this._fnSwapper.isSwapped||this.swapToInterceptor()}swapToInterceptor(){this._fnSwapper.swap((...n)=>{if(!this._enabled)return this.callOriginalInvocator(...n);const o=this.runMiddlewares(n);if(o){if("output"in o)return o.output;"input"in o&&(n=o.input)}return this._interceptionFunction.call(this._fnSwapper.target,this.getOriginalInvocator(),...n)})}getOriginalInvocator(){return this._fnSwapper.originalValue.bind(this._fnSwapper.target)}callOriginalInvocator(...n){return this.getOriginalInvocator()(...n)}runMiddlewares(n){for(const o of this._middlewares){const f=o(...n);if(f){if("output"in f)return f;"input"in f&&(n=f.input)}}return{input:n}}registerMiddleware(n){this._middlewares.push(n)}}class ci{constructor(n){De(this,"_fetchInterceptor"),De(this,"_interceptionFilters",new Set),this._fetchInterceptor=new fi(n,"fetch",(o,f,_)=>{for(const O of this._interceptionFilters)if(O.shouldIntercept(f,_))return this.shouldKeepFilter(O,f,_)||this.removeInterceptionFilter(O),O.intercept(f,_);return o(f,_)})}enable(){this._fetchInterceptor.enable()}disable(){this._fetchInterceptor.disable()}addInterceptionFilter(n){this.enable(),this._interceptionFilters.add(n)}removeInterceptionFilter(n){this._interceptionFilters.delete(n)}shouldKeepFilter(n,o,f){return typeof n.shouldKeep=="function"?n.shouldKeep(o,f):typeof n.shouldKeep=="boolean"?n.shouldKeep:!1}}new ci(oi());const li=[{async install(){const i=document.querySelector("#drawer wz-menu > wz-menu-sub-menu:nth-child(1) > wz-menu-item:nth-of-type(4)");if(!i||!(i instanceof HTMLElement))throw new Error("Unable to find school zone drawing menu item");const[n]=await Nn(async()=>{await ri(i,Hn([[[0,0],[0,1],[1,1],[0,0]]]).geometry)});if(n.actionName!=="ADD_BIG_JUNCTION")throw new Error("Unexpected action discovered when tried to resolve AddBigJunction action: "+n.actionName);const o=n.bigJunction;if(!o)throw new Error("Unexpected state: Added object does not exist");if(o.type!=="bigJunction")throw new Error("Unexpected state: Expected the added object to be a BigJunction instead of "+n.type);return{[Fe]:o.constructor,[$e]:n.constructor}}}],hi=[...li,...Kn],pi={"Editing.Transactions":{hook:cr},"DataModel.MapComments":{hook:Nr},"DataModel.PermanentHazards":{hook:Tn},"DataModel.BigJunctions":{hook:hi}};function le(i){const[n,o,f]=i.split(".").map(Number);return{major:n,minor:o,patch:f}}function he(i,n){return i?n?i.major&&n.major&&i.major!==n.major?i.major-n.major:i.minor&&n.minor&&i.minor!==n.minor?i.minor-n.minor:i.patch&&n.patch&&i.patch!==n.patch?i.patch-n.patch:0:1:-1}function di(i,n,o="highest"){let f=null;typeof i.highest=="string"&&(i.highest=le(i.highest)),typeof i.lowest=="string"&&(i.lowest=le(i.lowest));for(const _ of n){if(!_.version)continue;if(!f){f=_;continue}if(i.highest&&he(_.version,i.highest)>0||i.lowest&&he(_.version,i.lowest)<0)continue;const O=_.version,V=f.version,M=he(O,V);(o==="highest"&&M>0||o==="lowest"&&M<0)&&(f=_)}if(!f)throw new Error("No matching version found");return f}const yi={"0.1":i=>{const n=i.constructor;return new n(i.getScriptId(),i.getScriptName())}};function _i(i){const n=Object.entries(yi).map(([f,_])=>({version:le(f),cloner:_})),{cloner:o}=di({highest:i.getSDKVersion()},n);return o(i)}const Ke=new qe(pi);async function wi(i,n={}){if(n.immutable&&(i=_i(i)),i.State.isInitialized()||await i.Events.once({eventName:"wme-initialized"}),n.hooks)for(const o of n.hooks)await Ke.installHook(o,i);else await Ke.installAllHooks(i);return i}return wi}();
