this.WS=this.WS||{},this.WS.MapNotes=function(){function t(){return"unsafeWindow"in window?window.unsafeWindow:window}function n(t,n){return function(t,n,e){const r=new Response(n,e),i=new URL(t,location.toString());return Object.defineProperty(r,"url",{value:i}),r}(t,JSON.stringify(n),{headers:new Headers({"Content-Type":"application/json"})})}class e{constructor(t,n,e){this.t=t,this.i=n,this.o=e,this.u=!1,this.h=this.l()}l(){if(this.u)return this.h;const t=this.t[this.i];if("function"!=typeof t)throw new Error("Unable to refresh the original function, type of property is incompatible ("+typeof t+")");return t}p(){if(!this.u)return;const t=this.t[this.i];if("function"!=typeof t)throw new Error("Unable to restore original function, type of property is incompatible ("+typeof t+")");this.t[this.i]=this.h}enable(){this.u||(this.h=this.l(),this.t[this.i]=this.m.bind(this),this.u=!0)}disable(){this.u&&(this.p(),this.u=!1)}get isEnabled(){return this.u}_(...t){return this.h.apply(this.t,t)}C(...t){return this.o.apply(this.t,t)}}class r extends e{constructor(t,n,e){super(t,n,e)}static U(t){return t===r.CONTINUE_EXECUTION}static N(t){return!!Array.isArray(t)&&this.U(t[0])}m(...t){const n=this.C(...t);if(!r.N(n)&&!r.U(n))return n;if(r.N(n)){const[,...t]=n;return this._(...t)}return this._(...t)}}function i(t){if(t instanceof URL)return t;const n="string"==typeof t?t:t.url;return new URL(n,location.toString())}function o(t){const n=new URL(t);return n.search="",n.toString()}r.CONTINUE_EXECUTION=Symbol("__CONTINUE_EXECUTION__");const s=new Map,u=new r(t(),"fetch",(t=>{const n=o(i(t));if(s.has(n)){const t=s.get(n);return s.delete(n),Promise.resolve(t)}return r.CONTINUE_EXECUTION}));function c(t,n,e={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!a(t[0])||!a(t[1]))throw new Error("coordinates must contain numbers");return function(t,n,e={}){const r={type:"Feature"};return(0===e.id||e.id)&&(r.id=e.id),e.bbox&&(r.bbox=e.bbox),r.properties={},r.geometry=t,r}({type:"Point",coordinates:t},0,e)}function a(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}let h=null;async function f(){const e=t().W,r=e.Config.paths.features;return function(t,n){const e=o(i(t));s.set(e,n),u.enable()}(r,n(r,{mapComments:{objects:[{geometry:c([0,0]).geometry}]}})),await e.controller.descartesClient.getFeatures([0,0,0,0],{mapComments:!0},{})}async function w(){if(h)return h;const{mapComments:t}=await f();return h=t.objects[0].constructor}return{createNote:async function(t){return new(await w())(t)}}}();
